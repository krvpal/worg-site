<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-06-15 Tue 18:20 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Org-babel-gnuplot</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="John Hendy" />
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/htmlize.css"/>
 <link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/readtheorg.css"/>
 <script type="text/javascript" src="src/lib/js/jquery.min.js"></script>
 <script type="text/javascript" src="src/lib/js/bootstrap.min.js"></script>
 <script type="text/javascript" src="src/lib/js/jquery.stickytableheaders.min.js"></script>
 <script type="text/javascript" src="src/readtheorg_theme/js/readtheorg.js"></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="index.html"> UP </a>
 |
 <a accesskey="H" href="https://orgmode.org/worg/"> HOME </a>
</div><div id="content">
<h1 class="title">Org-babel-gnuplot</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9fc75e6">Introduction</a></li>
<li><a href="#org493571d">Requirements and Setup</a>
<ul>
<li><a href="#org159de68">Caveat: Windows</a></li>
</ul>
</li>
<li><a href="#org1870b3e">Babel Header Arguments</a></li>
<li><a href="#org5eafb78">Quick Gnuplot Overview</a>
<ul>
<li><a href="#orgb671edc">Title and Axis Labels</a></li>
<li><a href="#org32c68b5">Graph Width/Height Raio</a></li>
<li><a href="#orgc9f3a90">Tic Marks</a></li>
<li><a href="#org165f117">Plot</a></li>
</ul>
</li>
<li><a href="#org56320a7">Basic Plot Examples</a>
<ul>
<li><a href="#org7ac12a4">Function Plot</a></li>
<li><a href="#org446518b">Data Table Plot</a></li>
</ul>
</li>
<li><a href="#org6aa5bae">Above and Beyond</a>
<ul>
<li><a href="#org102c994">Named X-Values/Tics</a></li>
<li><a href="#org11afd42">Unevenly Spaced X-Values/Tics</a></li>
<li><a href="#org7a86198">Multiple X/Y Axes</a></li>
<li><a href="#orgd4a6ee2">Different Scales</a></li>
<li><a href="#org159a148">Broken X-Axis</a></li>
</ul>
</li>
<li><a href="#org88786b8">Miscellaneous Tips/Tricks</a>
<ul>
<li><a href="#orgd91eb3a"><code>reset</code> in Code Blocks</a></li>
<li><a href="#org21cab2c">Image Quality</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="subtitle" style="float: center; text-align: center;">
<p>
Org-babel support for
<a href="http://www.gnuplot.info/">Gnuplot</a>
</p>
<p>
<a href="http://www.gnuplot.info/">
<img src="http://www.gnuplot.info/figs/title2.png"/>
</a>
</p>
</div>

<div id="outline-container-org9fc75e6" class="outline-2">
<h2 id="org9fc75e6">Introduction</h2>
<div class="outline-text-2" id="text-org9fc75e6">
<p>
org-babel-gnuplot allows gnuplot code to be executed directly from
within embedded code blocks in Org-mode documents. These code blocks
can plot functions, graph data from tables stored in the documents,
and can include output as embedded graphics when the document is
exported.
</p>

<p>
The following provides instructions and some examples of gnuplot
usage. Since babel is simply allowing native code to run inside of
Org-mode, all gnuplot documentation is applicable and valid. <sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>

<p>
This file may be downloaded here: <a href="https://orgmode.org/worg/sources/org-contrib/babel/examples/org-babel-gnuplot.org">org-babel-gnuplot.org</a>. The image
links are to the images online on Worg, but running the code blocks
will produce matching images in the same directory as the .org file.
</p>
</div>
</div>

<div id="outline-container-org493571d" class="outline-2">
<h2 id="org493571d">Requirements and Setup</h2>
<div class="outline-text-2" id="text-org493571d">
<p>
Babel support for gnuplot requires that <a href="http://www.gnuplot.info/">gnuplot</a> be installed on your
system, along with <a href="https://github.com/rudi/gnuplot-el">gnuplot.el</a>, an <code>Emacs</code> major mode for interacting
with gnuplot.  You can install <a href="https://github.com/rudi/gnuplot-el">gnuplot.el</a> with <a href="http://tromey.com/elpa/">ELPA</a>.
</p>

<p>
It should be mentioned that one can also use Org-mode&rsquo;s org-plot as an
alternative to babel. Instructions already exist on Worg for
this.<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> The .org file used to create the org-plot Worg entry is
linked in the Introduction on that page and can be very helpful in
getting a feel for using gnuplot by using the <code>#+PLOT</code> header above a
table. This page, in contrast, is about using gnuplot in it&rsquo;s &ldquo;native&rdquo;
form.
</p>

<p>
To do this, babel support for the gnuplot language must be
enabled. Versions of Org-mode prior to 7.01 required enabling <i>both</i>
general babel support as well as specific language support like this:
</p>
<pre class="example">
;; set up babel support
(require 'org-babel)
(require 'org-babel-init)
(require 'org-babel-gnuplot)
;; add additional languages with (require 'org-babel-language)
</pre>

<p>
As of Org-mode 7.01, babel support is included and there is no need to load it via
.emacs. All you have to do is enable specific language support with
the following in .emacs:<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>
</p>
<pre class="example">
;; active Babel languages
(org-babel-do-load-languages
 'org-babel-load-languages
 '((gnuplot . t)))
;; add additional languages with '((language . t)))
</pre>

<p>
From then on, to access the power of gnuplot, the setup is generally
like this:
</p>

<p>
<b>Data Table</b> (if pulling from a table and not a formula)
</p>
<pre class="example">
#+tblname: data-table
| x | y1 | y2 |
|---+----+----|
| 0 |  3 |  6 |
| 1 |  4 |  7 |
| 2 |  5 |  8 |
</pre>

<p>
<b>Gnuplot Source Block</b>
</p>
<pre class="example">
#+begin_src gnuplot :var data=data-table :file output.png

  gnuplot code goes here

#+end_src
</pre>

<p>
To run gnuplot and produce a resultant graph (or to produce any result
from babel code blocks), simply move one&rsquo;s cursor anywhere in the code
block and press <code>C-c C-c</code> (Ctrl+C followed by Ctrl+C) and type &ldquo;yes&rdquo;
in the minibuffer when asked about executing the code. It&rsquo;s that
simple!
</p>
</div>

<div id="outline-container-org159de68" class="outline-3">
<h3 id="org159de68">Caveat: Windows</h3>
<div class="outline-text-3" id="text-org159de68">
<p>
Unfortunately, there seems to be an issue with getting gnuplot-mode
working properly with Org-mode on Windows machines. Attempts to use
Babel for gnuplot code blocks or the org-plot method both seem to
fail. Discussion is taking place on how to resolve this issue.<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>
As of Aug/Sept 2010, Bruce Ravel, the creator of gnuplot-mode, has
indicated willingness to work with a mailing list member to identify
the potential source of the issue.
</p>
</div>
</div>
</div>

<div id="outline-container-org1870b3e" class="outline-2">
<h2 id="org1870b3e">Babel Header Arguments</h2>
<div class="outline-text-2" id="text-org1870b3e">
<p>
Babel block headers are used to pass various arguments to control the
results of the executed code. The complete list of header arguments
is covered in the Org-mode manual; for now, some options frequently used for
gnuplot are:<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup>
</p>
<ul class="org-ul">
<li><code>:var data=data-table</code>
<ul class="org-ul">
<li>When data is to be plotted from a table, it is helpful to use a
heading right above the table in the form <code>#+tblname=data-table</code>,
where &ldquo;data-table&rdquo; is replaced with some short name to identify
the table to gnuplot.</li>
</ul></li>
<li><code>:exports {code, results, both, none}</code>
<ul class="org-ul">
<li>When the code is run and the document exported (e.g. to HTML or
\LaTeX PDF), what should appear? Just the code block itself? Only
the produced output (in this case a plot of some sort)? Both the
code and the accompanying results? Or nothing?</li>
</ul></li>
<li><code>:file foo.{png,eps,etc.}</code>
<ul class="org-ul">
<li>This option specifies where the resulting output should be put. If
no option is given, a gnuplot window will open with the
resultant plot. <b>NOTE:</b> Certain plot options may <i>not</i> output
properly to gnuplot directly and thus <i>must</i> have the <code>:file
    filename</code> option in the header. If the error &ldquo;Code block produced
no output&rdquo; recurs, try outputting to a file instead of
directly to gnuplot.</li>
</ul></li>
</ul>

<p>
Note that the current `gnuplot-mode&rsquo; doesn&rsquo;t provide support for
multiple sessions, so it is not possible to run concurrent gnuplot
sessions (see <a href="#orgd91eb3a"><code>reset</code> in Code Blocks</a>).
</p>
</div>
</div>

<div id="outline-container-org5eafb78" class="outline-2">
<h2 id="org5eafb78">Quick Gnuplot Overview</h2>
<div class="outline-text-2" id="text-org5eafb78">
<p>
As stated earlier, the full gnuplot documentation can and should be
consulted as the official reference, but it might be helpful to lay
out some common syntax here as a quick reference. Any of the commands
typed in <code>code</code> font below should be assumed to reside in a babel
code block (between <code>#+begin_src gnuplot</code> and <code>#+end_src</code>).
</p>
</div>

<div id="outline-container-orgb671edc" class="outline-3">
<h3 id="orgb671edc">Title and Axis Labels</h3>
<div class="outline-text-3" id="text-orgb671edc">
<p>
Set the title for the whole graph like this:
</p>
<pre class="example">
set title "This Title Goes at the Top"
</pre>


<p>
Set axis labels like so:
</p>
<pre class="example">
set xlabel "This is the X Axis"
set ylabel "This is the Y Axis"
</pre>
</div>
</div>

<div id="outline-container-org32c68b5" class="outline-3">
<h3 id="org32c68b5">Graph Width/Height Raio</h3>
<div class="outline-text-3" id="text-org32c68b5">
<p>
The size ratio of the graph is controlled like so:
</p>
<ul class="org-ul">
<li>Wider/shorter: <code>set size ratio 0.5</code> (any number less than 1)</li>
<li>Taller/thinner: <code>set size ratio 2</code> (any number greater than 1)</li>
<li>Square (1:1): <code>set size square</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgc9f3a90" class="outline-3">
<h3 id="orgc9f3a90">Tic Marks</h3>
<div class="outline-text-3" id="text-orgc9f3a90">
<p>
Tic marks are set with the method &ldquo;start,increment[,end].&rdquo; Start is
the beginning tic value, increment sets how far apart the tics are,
the the optional end specifies a stopping value. If no end is given,
the tics will carrry on by the increment value until the max x/y value
is reached. Here are some examples:
</p>
<pre class="example">
set xtics 0,10,100  %% tics every 10 from 0 -&gt; 100
set ytics -10,50    %% tics every 50 from -10 onward
</pre>

<p>
Named tics can also be used. Two values are provided, a numerical
value (where on the given axis the tic should be placed) and a name in
quotes to indicate what word should be placed at the tic instead of the
numerical value. This method allows for words instead of numbers to be
used (which has many uses) as well as for complete control over tic
mark placement.
</p>
<pre class="example">
set xtics ("Tic 1" -1, "Tic 2" 10, "Tic 3" 1001)
</pre>

<p>
The gnuplot default is for tics to show up on both sides and the top and
bottom of the graph. In other words, the tics on the left y-axis and
bottom x-axis are &ldquo;mirrored&rdquo; to the opposing side of the plot
borders. Stop this (tics only on left/bottom) by using:
</p>
<pre class="example">
set xtics nomirror
set ytics nomirror
</pre>

<p>
You can rotate tic marks for increased readability by specifying an
angle at which to rotate their labels. Here is the syntax
(substitute any angle value for -45):
</p>
<pre class="example">
set xtics rotate by -45
set ytics rotate by -45
</pre>
</div>
</div>

<div id="outline-container-org165f117" class="outline-3">
<h3 id="org165f117">Plot</h3>
<div class="outline-text-3" id="text-org165f117">
<p>
The heart of gnuplot is the <code>plot</code> command. It is broken down into
several sections:
</p>
</div>
<div id="outline-container-org6e8efe0" class="outline-4">
<h4 id="org6e8efe0">Plot what?</h4>
<div class="outline-text-4" id="text-org6e8efe0">
<p>
This will either be a function or data. Plotting a function would look
like this:
</p>
<pre class="example">
f(x) = x**2
plot f(x)
</pre>

<p>
Plotting data would go like this (remembering that the variable
&ldquo;data&rdquo; was defined to correspond to some table in the Org-mode document):
</p>
<pre class="example">
plot data using x:y
</pre>

<p>
The <code>x:y</code> identifies the column numbers in the table that should
be used for the x values and corresponding y values. Using the command
<code>plot data using 1:3</code> would tell gnuplot to go down the rows of the
table and plot points using x values from the first column and grab
corresponding y values from the third. &ldquo;Using&rdquo; can be abbreviated with
as simply &ldquo;u&rdquo; which helps keep lines shorter (<code>plot data u 1:3</code>).
</p>
</div>
</div>

<div id="outline-container-org24de3ec" class="outline-4">
<h4 id="org24de3ec">Plot how?</h4>
<div class="outline-text-4" id="text-org24de3ec">
<p>
To customize the look of plots, many options are available. To pass
these options to gnuplot looks like this:
</p>
<pre class="example">
plot data u 1:2 with lines
</pre>

<p>
In this case gnuplot will use the linestyle <code>lines</code> to plot the
data. This will create a colored line through the data points. Some
commonly used options (and their abbreviations) are:
</p>
<ul class="org-ul">
<li>points (p)</li>
<li>dots (d)</li>
<li>lines (l)</li>
<li>linespoints (lp)</li>
<li>impulses (i)</li>
<li>steps</li>
<li>boxes</li>
</ul>

<p>
One can find all available plot styles in the documentation or
elsewhere online.<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup> To thicken up lines or points, just add <code>lw #</code>
(stands for &ldquo;lineweight) after the style (e.g. <code>...with lines lw
3</code>). The default weight is 1 which can look a little light. Use 2 or
more for thicker, easier to see, lines and points. The word &rdquo;with&ldquo; can
be abbreviated &rdquo;w&ldquo; to shorten code lines; <code>plot data u 1:3 w l lw 2</code>
is equivalent to <code>plot data using 1:3 with lines lineweight 2</code>.
</p>
</div>
</div>

<div id="outline-container-org32eafe7" class="outline-4">
<h4 id="org32eafe7">Call it what?</h4>
<div class="outline-text-4" id="text-org32eafe7">
<p>
Add a title in the graph key like this:
</p>
<pre class="example">
plot data u 1:2 w lines lw 2 title 'Data Set 1'
</pre>

<p>
To omit one (or more) plots from the key, use the <code>notitle</code> option:
</p>
<pre class="example">
plot data u 1:2 w lines notitle, \
     data u 1:3 w points title 'Data Set 2', \
     data u 1:4 w lp title 'Data Set 3', \
     data u 1:5 w bars notitle
</pre>


<p>
This is especially helpful when multiple data sets are plotted
together. Sometimes, however, a key is not desired at all. When only
one function or data set is plotted and its title is obvious, put this
in the code block to get rid of the key altogether:
</p>
<pre class="example">
set nokey
</pre>

<p>
Sometimes the key itself in its default position (upper right) is
distracting from the graph, especially when the <code>with points</code> plot
style is used since the point in the key looks like a point on the
graph. To set a nice border around the key, do this:
</p>
<pre class="example">
set key box linestyle -1
</pre>

<p>
The linestyle -1 creates a black lined border. The gnuplot manual and other
locations list all available linestyles (colors, dots, dashes, etc.).<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup>
</p>
</div>
</div>

<div id="outline-container-org29858e7" class="outline-4">
<h4 id="org29858e7">Any more?</h4>
<div class="outline-text-4" id="text-org29858e7">
<p>
If more than one plot is to be made on the same graph, it&rsquo;s done like
this for fuctions:
</p>
<pre class="example">
f(x)=x**2
g(x)=x**3
h(x)=sqrt(x)
plot f(x),g(x),h(x)
</pre>

<p>
For data from tables, it&rsquo;s like this:
</p>
<pre class="example">
plot data u 1:2 w lines, data u 1:3 w points, \
     data u 1:4 w lp
</pre>

<p>
This plots column 1 (x) against column 2 (y) with lines, 1 against 3
with points, and 1 against 4 with linespoints. The use of the <code>\</code>
tells gnuplot to keep reading onward to the next line. Typically the end of a line signals the
end of the command and gnuplot will complain since <code>data u 1:4 w lp</code>
isn&rsquo;t a command all by itself without <code>plot</code> preceding it. The <code>\</code>
ensures that the whole command is understood. One can make an
extremely long line, but <code>\</code> helps keep things looking tidy and keeps
one from scrolling left and right to track the whole line of code.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org56320a7" class="outline-2">
<h2 id="org56320a7">Basic Plot Examples</h2>
<div class="outline-text-2" id="text-org56320a7">
<p>
Following some introductory topics, here are some basic examples showing what things look
like when all of the above is combined.
</p>
</div>
<div id="outline-container-org7ac12a4" class="outline-3">
<h3 id="org7ac12a4">Function Plot</h3>
<div class="outline-text-3" id="text-org7ac12a4">
<p>
A full babel block of code for a few functions might look like this:
</p>
<pre class="example">
#+begin_src gnuplot :exports code :file file.png
reset

set title "Putting it All Together"

set xlabel "X"
set xrange [-8:8]
set xtics -8,2,8


set ylabel "Y"
set yrange [-20:70]
set ytics -20,10,70

f(x) = x**2
g(x) = x**3
h(x) = 10*sqrt(abs(x))

plot f(x) w lp lw 1, g(x) w p lw 2, h(x) w l lw 3
#+end_src
</pre>


<div class="figure">
<p><img src="https://orgmode.org/worg/org-contrib/babel/images/gnuplot-basic-function.png" alt="gnuplot-basic-function.png" width="800" />
</p>
</div>
</div>
</div>

<div id="outline-container-org446518b" class="outline-3">
<h3 id="org446518b">Data Table Plot</h3>
<div class="outline-text-3" id="text-org446518b">
<p>
Plotting data points from a table could look like this:<sup><a id="fnr.2.100" class="footref" href="#fn.2">2</a></sup>
</p>
<table id="org3cd83f0" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">x</th>
<th scope="col" class="org-right">y1</th>
<th scope="col" class="org-right">y2</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">0.1</td>
<td class="org-right">0.425</td>
<td class="org-right">0.375</td>
</tr>

<tr>
<td class="org-right">0.2</td>
<td class="org-right">0.3125</td>
<td class="org-right">0.3375</td>
</tr>

<tr>
<td class="org-right">0.3</td>
<td class="org-right">0.24999993</td>
<td class="org-right">0.28333338</td>
</tr>

<tr>
<td class="org-right">0.4</td>
<td class="org-right">0.275</td>
<td class="org-right">0.28125</td>
</tr>

<tr>
<td class="org-right">0.5</td>
<td class="org-right">0.26</td>
<td class="org-right">0.27</td>
</tr>

<tr>
<td class="org-right">0.6</td>
<td class="org-right">0.25833338</td>
<td class="org-right">0.24999993</td>
</tr>

<tr>
<td class="org-right">0.7</td>
<td class="org-right">0.24642845</td>
<td class="org-right">0.23928553</td>
</tr>

<tr>
<td class="org-right">0.8</td>
<td class="org-right">0.23125</td>
<td class="org-right">0.2375</td>
</tr>

<tr>
<td class="org-right">0.9</td>
<td class="org-right">0.23333323</td>
<td class="org-right">0.2333332</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">0.2225</td>
<td class="org-right">0.22</td>
</tr>
</tbody>
</table>

<pre class="example">
#+begin_src gnuplot :var data=basic-plot :exports code :file file.png
set title "Putting it All Together"

set xlabel "X"
set xrange [0:1]
set xtics 0,0.1,1


set ylabel "Y"
set yrange [0.2:0.5]
set ytics 0.2,0.05,0.5


plot data u 1:2 w p lw 2 title 'x vs. y1', \
     data u 1:3 w lp lw 1 title 'x vx. y2'
#+end_src
</pre>


<div class="figure">
<p><img src="https://orgmode.org/worg/org-contrib/babel/images/gnuplot-basic-plot.png" alt="gnuplot-basic-plot.png" width="800" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org6aa5bae" class="outline-2">
<h2 id="org6aa5bae">Above and Beyond</h2>
<div class="outline-text-2" id="text-org6aa5bae">
</div>
<div id="outline-container-org102c994" class="outline-3">
<h3 id="org102c994">Named X-Values/Tics</h3>
<div class="outline-text-3" id="text-org102c994">
<p>
Sometimes it&rsquo;s desireable to have text as the x-values/xtics instead of
numbers.<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup> Gnuplot will plot a column of text entries as the x-values for
its points by spacing the named values evenly along the axis. Here&rsquo;s
an example of a running distance log:<sup><a id="fnr.9" class="footref" href="#fn.9">9</a></sup>
</p>


<div class="figure">
<p><img src="https://orgmode.org/worg/org-contrib/babel/images/gnuplot-named-xtics.png" alt="gnuplot-named-xtics.png" width="800" />
</p>
</div>

<table id="orgee01a9f" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Date</th>
<th scope="col" class="org-right">Distance</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">8/25/2010</td>
<td class="org-right">3.2</td>
</tr>

<tr>
<td class="org-left">8/29/2010</td>
<td class="org-right">3.0</td>
</tr>

<tr>
<td class="org-left">9/1/2010</td>
<td class="org-right">2.4</td>
</tr>

<tr>
<td class="org-left">9/2/2010</td>
<td class="org-right">2.5</td>
</tr>

<tr>
<td class="org-left">9/5/2010</td>
<td class="org-right">2.3</td>
</tr>

<tr>
<td class="org-left">9//2010</td>
<td class="org-right">2.0</td>
</tr>
</tbody>
</table>

<pre class="example">
#+begin_src gnuplot :var data=xtics :exports code :file file.png
  reset

  set title "Running Stats"

  set xlabel "Date"
  set xtics rotate by -45

  set yrange [1:5]
  set ylabel "Distance (mi)"

  plot data u 2:xticlabels(1) w lp lw 2 notitle
#+end_src
</pre>

<p>
The <code>2:xticlabels(1)</code> tells gnuplot to use the values in column 1 for
the xtic names and to plot them against the y-values in column 2.
</p>
</div>
</div>

<div id="outline-container-org11afd42" class="outline-3">
<h3 id="org11afd42">Unevenly Spaced X-Values/Tics</h3>
<div class="outline-text-3" id="text-org11afd42">
<p>
While the above example works extremely well when evenly placed tics is
desired, other circumstances may arise in which
<i>unevenly spaced</i> text values may be desired.<sup><a id="fnr.10" class="footref" href="#fn.10">10</a></sup> Remember from above that
it <i>is</i> possible to set text xtics manually with <code>set xtics ("name"
value, "name2" value2,...</code>), but the method here has the advantage of
being automatic. Here is an example:
</p>


<div class="figure">
<p><img src="https://orgmode.org/worg/org-contrib/babel/images/gnuplot-uneven-named-xtics.png" alt="gnuplot-uneven-named-xtics.png" width="800" />
</p>
</div>

<p>
To accomplish this, make a table with a column for the <i>value</i> of the
xtics (where it should be placed on the axis), another column with the name for
each xtic (the names to be used), and then add whatever subsequent y
values should correspond to these x-values. Here is an example:
</p>

<table id="org7b6a51d" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">tic name</th>
<th scope="col" class="org-right">x-value</th>
<th scope="col" class="org-right">Dead (y)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Civil</td>
<td class="org-right">1861</td>
<td class="org-right">0.62</td>
</tr>

<tr>
<td class="org-left">WWI</td>
<td class="org-right">1914</td>
<td class="org-right">9.8</td>
</tr>

<tr>
<td class="org-left">WWII</td>
<td class="org-right">1939</td>
<td class="org-right">24</td>
</tr>

<tr>
<td class="org-left">Nam</td>
<td class="org-right">1955</td>
<td class="org-right">1.5</td>
</tr>

<tr>
<td class="org-left">Gulf</td>
<td class="org-right">1990</td>
<td class="org-right">0.04</td>
</tr>
</tbody>
</table>

<pre class="example">
#+begin_src gnuplot :var data=named-xtics :exports code :file file.png
  reset

  set yrange [0:25]
  set ylabel "Deaths (MM)"

  set xtics ("1850" 1850, "2010" 2010)
  set xrange [1850:2010]
  set xlabel "Wars in Time"

  set title 'War Deaths'

  plot data using 2:3:xticlabels(1) w p lw 3 notitle
#+end_src
</pre>

<p>
For multiple data sets, simply include multiple columns for y-values
to be plotted and plot each data set with the syntax
<code>x:y:xticlabels(col #)</code>. Most likely, the <code>col #</code> will be the same for
all data sets (the column of names for xtics will probably remain the
same). Here is an example:
</p>
<pre class="example">
plot data u 2:3:xticlabels(1) title 'Set1',\
data u 2:4:xticlabels(1) title 'Set2', \
data u 2:5:xticlabels(1) title 'Set3'
#+end_src
</pre>
</div>
</div>

<div id="outline-container-org7a86198" class="outline-3">
<h3 id="org7a86198">Multiple X/Y Axes</h3>
<div class="outline-text-3" id="text-org7a86198">
<p>
It is possible to set different scales for both x and y axes. This can
be helpful for various reasons:
</p>
<ul class="org-ul">
<li>Plotting data in two units of measure (e.g. left y axis = degrees F,
right = degrees C)</li>
<li>Plotting one data set against one axis and another against the other
in the same graph</li>
</ul>

<p>
Returning to the running log, perhaps both times and distances were to
be plotted in the same graph:<sup><a id="fnr.11" class="footref" href="#fn.11">11</a></sup>
</p>


<div class="figure">
<p><img src="https://orgmode.org/worg/org-contrib/babel/images/gnuplot-multi-axes.png" alt="gnuplot-multi-axes.png" width="800" />
</p>
</div>

<table id="org64bb5ee" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Date</th>
<th scope="col" class="org-right">Time</th>
<th scope="col" class="org-right">Distance</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">8/25/2010</td>
<td class="org-right">17:14</td>
<td class="org-right">3.2</td>
</tr>

<tr>
<td class="org-left">8/29/2010</td>
<td class="org-right">14:00</td>
<td class="org-right">2.4</td>
</tr>

<tr>
<td class="org-left">9/1/2010</td>
<td class="org-right">15:13</td>
<td class="org-right">2.5</td>
</tr>

<tr>
<td class="org-left">9/2/2010</td>
<td class="org-right">13:45</td>
<td class="org-right">2.3</td>
</tr>

<tr>
<td class="org-left">9/5/2010</td>
<td class="org-right">13:20</td>
<td class="org-right">2.0</td>
</tr>

<tr>
<td class="org-left">9//2010</td>
<td class="org-right">16:35</td>
<td class="org-right">2.8</td>
</tr>
</tbody>
</table>

<pre class="example">
#+begin_src gnuplot :var data=multi-axes :exports code :file file.png
  reset

  set title "Running Stats"
  set size ratio square
  set key box linestyle -1

  set xlabel "Date"
  set xtics nomirror rotate by -45

  set yrange [9:21]
  set ylabel "Time (min)--Red"
  set ytics nomirror

  set y2range [1.5:3.5]
  set y2label "Distance (mi)--Green"
  set y2tics 0,0.5,3.5

  set style data points
  plot data u 2:xticlabels(1) axis x1y1 lw 3 title 'Time', \
       data u 3:xticlabels(1) axis x1y2 lw 3 title 'Distance'
#+end_src
</pre>

<p>
Walking through the new items in the code:
</p>
<ul class="org-ul">
<li><code>y2range</code>, <code>y2label</code>, and <code>y2tics</code> set the options for the second
y-axis, the one on the right side of the graph</li>
<li>Setting both <code>xtics</code> and <code>ytics</code> to <code>nomirror</code> keeps tics off of the
top of the plot border as well as keeping the left ytics from showing up on
the right y-axis since the scales are different (this would be confusing)</li>
<li>The plot commands have an <code>axis x#y#</code> argument
<ul class="org-ul">
<li>The first is plotted against the bottom x-axis (<code>x1</code>) and the left
y-axis(<code>y1</code>) by inserting <code>axis x1y1</code></li>
<li>The second is plotted against the bottom x-axis (the x-values are
the same for both plots) but the right y-axis with <code>axis x1y2</code></li>
</ul></li>
</ul>

<p>
Lastly, in a plot like this where the left and right axis units
(distance and time) can be related (d/t = speed), it is possible to
create a &ldquo;calibrated&rdquo; plot. Note the ranges specified for the two
graphs:
</p>
<ul class="org-ul">
<li>y1min = 9min, y2min = 1.5mi; 1.5mi/9min = 10mph</li>
<li>y1max = 21min, y2max = 3.5; 3.5mi/21min = 10mph</li>
</ul>

<p>
Since both axes are &ldquo;calibrated&rdquo; in this way, examining the two points
plotted for each date can be visually informative:
</p>
<ul class="org-ul">
<li>Distance/time on top of each other indicate that the speed was 10mph</li>
<li>If the distance plot is higher than time, speed &gt; 10mph (e.g. 9/2)</li>
<li>If the time plot is higher than distance, speed &lt; 10mph (e.g. 9/5)</li>
</ul>

<p>
Simply changing the yranges allows for re-calibrating the plot for a
different target speed.
</p>
</div>
</div>

<div id="outline-container-orgd4a6ee2" class="outline-3">
<h3 id="orgd4a6ee2">Different Scales</h3>
<div class="outline-text-3" id="text-orgd4a6ee2">
<p>
Sometimes, more than one scale is desired on the x-axis to
call attention one or more areas on a curve. Perhaps most of a curve
is rather &ldquo;plain,&rdquo; but some detail exists which would stand out more
if the scale were altered. This can be accomplished by something
called <code>multiplot</code> which uses multiple graphs overlayed next to
one another to create the appearance of one graph that uses varying scales
along the x-axis.<sup><a id="fnr.12" class="footref" href="#fn.12">12</a></sup> <sup>, </sup><sup><a id="fnr.13" class="footref" href="#fn.13">13</a></sup> Here is an example:
</p>


<div class="figure">
<p><img src="https://orgmode.org/worg/org-contrib/babel/images/gnuplot-diff-scales.png" alt="gnuplot-diff-scales.png" width="800" />
</p>
</div>


<p>
Here is some data on the population of the world through time:<sup><a id="fnr.14" class="footref" href="#fn.14">14</a></sup>
</p>
<table id="org34d8e5f" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">tic name</th>
<th scope="col" class="org-right">x-loc</th>
<th scope="col" class="org-right">Pop</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">10k BC</td>
<td class="org-right">-10000</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-9000</td>
<td class="org-right">3</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-8000</td>
<td class="org-right">5</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-7000</td>
<td class="org-right">7</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-6000</td>
<td class="org-right">10</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-5000</td>
<td class="org-right">15</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-4000</td>
<td class="org-right">20</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-3000</td>
<td class="org-right">25</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-2000</td>
<td class="org-right">35</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-1000</td>
<td class="org-right">50</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">-500</td>
<td class="org-right">100</td>
</tr>

<tr>
<td class="org-left">AD 1</td>
<td class="org-right">1</td>
<td class="org-right">200</td>
</tr>

<tr>
<td class="org-left">1000</td>
<td class="org-right">1000</td>
<td class="org-right">310</td>
</tr>

<tr>
<td class="org-left">1750</td>
<td class="org-right">1750</td>
<td class="org-right">791</td>
</tr>

<tr>
<td class="org-left">1800</td>
<td class="org-right">1800</td>
<td class="org-right">978</td>
</tr>

<tr>
<td class="org-left">1850</td>
<td class="org-right">1850</td>
<td class="org-right">1262</td>
</tr>

<tr>
<td class="org-left">1900</td>
<td class="org-right">1900</td>
<td class="org-right">1650</td>
</tr>

<tr>
<td class="org-left">\&rsquo;50</td>
<td class="org-right">1950</td>
<td class="org-right">2519</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1955</td>
<td class="org-right">2756</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1960</td>
<td class="org-right">2982</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1965</td>
<td class="org-right">3335</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1970</td>
<td class="org-right">3692</td>
</tr>

<tr>
<td class="org-left">\&rsquo;75</td>
<td class="org-right">1975</td>
<td class="org-right">4068</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1980</td>
<td class="org-right">4435</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1985</td>
<td class="org-right">4831</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1990</td>
<td class="org-right">5263</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1995</td>
<td class="org-right">5674</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">2000</td>
<td class="org-right">6070</td>
</tr>

<tr>
<td class="org-left">2005</td>
<td class="org-right">2005</td>
<td class="org-right">6454</td>
</tr>
</tbody>
</table>

<pre class="example">
#+begin_src gnuplot :var data=diff-scales :exports code :file file.png
  reset

  set xrange [ -10000 : 1 ]
  set yrange [ 0 : 7000 ]
  set xlabel "Time"

  set multiplot

  set size 0.275,1
  set origin 0.0,0.0
  set lmargin 10
  set rmargin 0
  set ylabel "Population (MM)"
  set ytics nomirror
  plot data using 2:3:xticlabels(1) with lines lw 3 notitle

  set origin 0.275,0.0
  set size 0.15,1
  set format y ""
  set noytics
  set lmargin 0
  set rmargin 0
  set xrange [2 : 1750]
  set ylabel ""
  plot data using 2:3:xticlabels(1) with lines lw 3 notitle

  set origin 0.425,0.0
  set size 0.575,1
  set format y ""
  set noytics
  set lmargin 0
  set rmargin 2
  set xrange [1751 : 2005]
  set ylabel ""
  plot data using 2:3:xticlabels(1) with lines lw 3 notitle

  set nomultiplot
#+end_src
</pre>

<p>
Walking through the code:
</p>
<ul class="org-ul">
<li>Left Slice
<ul class="org-ul">
<li>An initial <code>xrange/yrange</code> are set for the left-most &ldquo;slice&rdquo; of the graph</li>
<li>An x-axis label is also provided and the multiplot mode is set</li>
<li><code>set size</code> tells gnuplot to make the first slice the full height
high (1) but only .275 (out of 1) wide. This leaves 72.5% of the
graph for the next two slices</li>
<li><code>set origin</code> tells gnuplot to start the plot at the bottom left (0,0)</li>
<li><code>lmargin</code> is set for 10 (standard) but <code>rmargin</code> is set at 0 in
order to let the left edge of the middle slice sit
against the right edge of the left-most slice with no gap</li>
<li>The <code>ylabel</code> is set here, and only once. Each slice is
treated as a separate graph, and setting it for each slice creates
mutliple labels which is unnecessary since they all share the same label/units.</li>
<li>Lastly, the data is plotted</li>
</ul></li>
<li>Middle slice
<ul class="org-ul">
<li>New values are given for the <code>xrange</code>, the <code>ylabel</code> is set to
blank, and the plot command is about the same</li>
<li>This time both <code>lmargin</code> <i>and</i> <code>rmargin</code> are set to 0 to allow for
seamless alignment with the left-most and right-most slices of the
plot</li>
<li>The size is set for 0.15 width since this portion does not need to
be very wide</li>
<li>Note that the origin is set to start where the previous slice left off
(left slice origin + left slice width = 0 + 0.275 = 0.275)</li>
</ul></li>
<li>Right slice
<ul class="org-ul">
<li>New values are given for the <code>xrange</code>, the <code>ylabel</code> is set to
blank, and the plot command is about the same again</li>
<li>The <code>lmargin</code> is 0 so that the slice aligns with the right edge of
the middle slice, but <code>rmargin</code> is set for 2 to provide a nice
border between the picture  and the right y-axis</li>
<li>The origin for the right slice is set for the left slice width +
middle slice width = 0.275 + 0.15 = 0.425</li>
<li>The size is set to take up the remaining width: 1 - 0.275 - 0.15 = 0.575</li>
</ul></li>
</ul>

<p>
The <code>set no ytics</code> option removes the tics from the vertical divisions
separating the slices. Using <code>set ytics nomirror</code> on the first
slice keeps the ytics off of the first division.
</p>

<p>
The divisions could be turned off altogether if one wanted to. Gnuplot
accepts setting borders individually in the form of <code>set border
1+2+4+8</code>. Each number stands for one of the borders:
</p>
<ul class="org-ul">
<li><code>1</code> = bottom</li>
<li><code>2</code> = left</li>
<li><code>4</code> = top</li>
<li><code>8</code> = right</li>
</ul>

<p>
For no vertical divisions in our example, this would be used:
</p>
<ul class="org-ul">
<li>Left slice: use <code>set border 1+2+4</code> (bottom, left, top)</li>
<li>Middle slice: use <code>set border 1+4</code> (bottom, top)</li>
<li>Right slice: use <code>set border 1+4+8</code> (bottom, top, right)</li>
</ul>

<p>
While slightly more visually appealing, this may be potentially
confusing since no divisions gives the illusion that the x-axis is
the same scale. If the divisions are there, it helps communicate that
there is something else going on.
</p>

<p>
This method can be used for functions instead of data from a table as
well in order to zoom in on a particular slice of a graph. One of the
previous footnote above presents such case.<sup><a id="fnr.13.100" class="footref" href="#fn.13">13</a></sup>
</p>
</div>
</div>

<div id="outline-container-org159a148" class="outline-3">
<h3 id="org159a148">Broken X-Axis</h3>
<div class="outline-text-3" id="text-org159a148">
<p>
Arrows can be used quite cleverly to &ldquo;break&rdquo; axes.<sup><a id="fnr.15" class="footref" href="#fn.15">15</a></sup> <sup>, </sup><sup><a id="fnr.16" class="footref" href="#fn.16">16</a></sup> <sup>, </sup><sup><a id="fnr.17" class="footref" href="#fn.17">17</a></sup> The method involves drawing 6 arrows to &ldquo;break&rdquo; both the top
and bottom x-axes: 2 diagonal and 1 white per axis to create the illusion of a break.
</p>

<p>
While the following is not <i>really</i> to scale, the example of a
far distant date with a broken line and then some recent dates shows
one example where this can be employed to create an esthetically
pleasing plot. The world population data will be used again with some
slight modifications.
</p>


<div class="figure">
<p><img src="https://orgmode.org/worg/org-contrib/babel/images/gnuplot-broken-axis.png" alt="gnuplot-broken-axis.png" width="800" />
</p>
</div>

<table id="orgbbb5e5e" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">tic name</th>
<th scope="col" class="org-right">x-loc</th>
<th scope="col" class="org-right">Pre</th>
<th scope="col" class="org-right">Post</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">10,000 BC</td>
<td class="org-right">1600</td>
<td class="org-right">1</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1650</td>
<td class="org-right">15</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left">AD 1</td>
<td class="org-right">1700</td>
<td class="org-right">200</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left">1750</td>
<td class="org-right">1750</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">791</td>
</tr>

<tr>
<td class="org-left">1800</td>
<td class="org-right">1800</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">978</td>
</tr>

<tr>
<td class="org-left">1850</td>
<td class="org-right">1850</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">1262</td>
</tr>

<tr>
<td class="org-left">1900</td>
<td class="org-right">1900</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">1650</td>
</tr>

<tr>
<td class="org-left">\&rsquo;50</td>
<td class="org-right">1950</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2519</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1955</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2756</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1960</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2982</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1965</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">3335</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1970</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">3692</td>
</tr>

<tr>
<td class="org-left">\&rsquo;75</td>
<td class="org-right">1975</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">4068</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1980</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">4435</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1985</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">4831</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1990</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">5263</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">1995</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">5674</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">2000</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">6070</td>
</tr>

<tr>
<td class="org-left">2005</td>
<td class="org-right">2005</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">6454</td>
</tr>
</tbody>
</table>

<pre class="example">
#+begin_src gnuplot :var data=broken-axis :exports code :file file.png
  reset

  A=1725
  B=1600
  C=2010
  D=0
  E=6500

  xoff=.005*(C-B)
  yoff=.02*(E-D)

  set arrow 1 from A-xoff, D to A+xoff, D nohead lw 2 lc rgb "#ffffff" front
  set arrow 2 from A-xoff, E to A+xoff, E nohead lw 2 lc rgb "#ffffff" front
  set arrow 3 from A-xoff-xoff, D-yoff to A+xoff-xoff, D+yoff nohead front
  set arrow 4 from A-xoff+xoff, D-yoff to A+xoff+xoff, D+yoff nohead front
  set arrow 5 from A-xoff-xoff, E-yoff to A+xoff-xoff, E+yoff nohead front
  set arrow 6 from A-xoff+xoff, E-yoff to A+xoff+xoff, E+yoff nohead front

  set xrange [B:C]
  set yrange [D:E]

  set xlabel 'Time'
  set ylabel 'Population (MM)'
  set title 'World Population'

  plot data u 2:3:xticlabels(1) w l lw 3 notitle, data u 2:4:xticlabels(1) w l lw 3 lc 1 notitle
#+end_src
</pre>

<p>
Here are some notes on the above:
</p>
<ul class="org-ul">
<li>A-&gt;E are variables used to set the break location (A), the <code>xrange</code>
(B,C) and the <code>yrange</code> (D,E)</li>
<li>xoff/yoff have to do with the break. xoff is the gap created in the
x-axis and yoff is the height above and below the scale for the
diagonal lines. The multipliers (.005 &amp; .02) work for this example but may need
tinkering to work elsewhere (if they don&rsquo;t look right).</li>
<li>The arrows (the <code>set arrow...</code> commands) draw the 4 diagonal lines and a white line in between
them to create the actual break</li>
<li>Two sets of y values and two plot commands were used to create the
break between AD 1 and 1750. This is not always needed. See the
gnuplot-tricks blog for how to do this with a continuous function
(e.g. sin x) and an &ldquo;offset&rdquo; variable for the same effect.<sup><a id="fnr.16.100" class="footref" href="#fn.16">16</a></sup></li>
</ul>

<p>
In the case above, the x-axis is &ldquo;cheated&rdquo; in that it is not only
broken, but the scale is artificially manipulated. In the data chart,
there should have been population values at 10,000 BC, 5,000 BC, and 1
AD. Instead they occur at 1600, 1650 and 1700 AD. The spacing is proportionate, but scaled by 100x
(50 years apart vs. 5,000). Compared to the plot from 1750-2005, it&rsquo;s
obviously not the same x-axis scale. If the actual data points were
used, the later data points would have been significantly &ldquo;scrunched.&rdquo;
While not technically correct, it&rsquo;s perhaps more visually appealing, especially where scale is
not too important. To get the point across, it does the job very well:
left of break was not much growth, then in a much smaller time scale
to the right of the break, much population growth occurred. The
multi-axes/scales in the previous section is more &ldquo;honest&rdquo; with
respect to scale, but perhaps this example is cleaner/better looking.
</p>

<p>
Obviously there are many functions (like sin (x) from gnuplot-tricks)
where changing the scale is <i>not</i> required and thus the plot is both
visually appealing <i>and</i> manipulation of scales is not required.
</p>
</div>
</div>
</div>

<div id="outline-container-org88786b8" class="outline-2">
<h2 id="org88786b8">Miscellaneous Tips/Tricks</h2>
<div class="outline-text-2" id="text-org88786b8">
<p>
Helpful odds and ends are constantly surfacing on the Org-mode mailing
list. This section will serve as a reservoir for summarizing new
developments and techniques as they arise.
</p>
</div>
<div id="outline-container-orgd91eb3a" class="outline-3">
<h3 id="orgd91eb3a"><code>reset</code> in Code Blocks</h3>
<div class="outline-text-3" id="text-orgd91eb3a">
<p>
Sometimes when executing code blocks, odd results occur. Plots will
persist in displaying the wrong title, a &ldquo;remnant&rdquo; option from a
previously generated plot will appear, the size ratio will be wrong,
etc. This typically happens when multiple gnuplot blocks exist in the
same document. The use of <code>reset</code> at the beginning of each gnuplot
block eliminates these issues by clearing any &ldquo;residual options&rdquo; from
previously generated output.
</p>
</div>
</div>

<div id="outline-container-org21cab2c" class="outline-3">
<h3 id="org21cab2c">Image Quality</h3>
<div class="outline-text-3" id="text-org21cab2c">
<p>
For many graphs, output to .png (with <code>:file filename.png</code> in the header) may be
sufficient. Sometimes, however, the generated image quality is not
acceptable. The mailing list provided an excellent solution
for increased gnuplot image quality:<sup><a id="fnr.18" class="footref" href="#fn.18">18</a></sup>
</p>

<pre class="example">
#+begin_src gnuplot :file file.eps
  reset
  set terminal postscript [color] [solid] eps enhanced 20
  ...
  ...
#+end_src
</pre>

<p>
Note the output to <i>file.eps</i>, which corresponds to the <code>set
terminal...</code> command used. This creates a higher resolution .eps image instead of a
.png. The <code>color</code> and <code>solid</code> options are optional. Without the
<code>color</code> option, the output will default to monochrome (black and
white). The <code>solid</code> option can be used to keep all linestyles as solid
lines; without it, gnuplot will cycle through various styles of
dashes/shapes/etc.
</p>

<p>
Once the .eps file is generated, ImageMagick can be used to convert
it to .png:<sup><a id="fnr.19" class="footref" href="#fn.19">19</a></sup>
</p>
<pre class="example">
convert -density 300 file.eps file.png
</pre>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
Gnuplot manual downloads: <a href="http://www.gnuplot.info/documentation.html">http://www.gnuplot.info/documentation.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Org-plot on Worg: <a href="https://orgmode.org/worg/org-tutorials/org-plot.html">https://orgmode.org/worg/org-tutorials/org-plot.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
7.01 list of user visible changes: <a href="https://orgmode.org/Changes.html#ob-configuration-changes">https://orgmode.org/Changes.html#ob-configuration-changes</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.mail-archive.com/emacs-orgmode@gnu.org/msg30080.html">http://www.mail-archive.com/emacs-orgmode@gnu.org/msg30080.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
Org-mode manual on babel header args: <a href="https://orgmode.org/manual/Specific-header-arguments.html#Specific-header-arguments">https://orgmode.org/manual/Specific-header-arguments.html#Specific-header-arguments</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
Nice plot style summary: <a href="http://t16web.lanl.gov/Kawano/gnuplot/intro/style-e.html">http://t16web.lanl.gov/Kawano/gnuplot/intro/style-e.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
Nice list of colors and styles: <a href="http://www2.yukawa.kyoto-u.ac.jp/~ohnishi/Lib/gnuplot.html">http://www2.yukawa.kyoto-u.ac.jp/~ohnishi/Lib/gnuplot.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.mail-archive.com/emacs-orgmode@gnu.org/msg22528.html">http://www.mail-archive.com/emacs-orgmode@gnu.org/msg22528.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara"><p class="footpara">
Pertinent mailing list discussion and convenient data source: <a href="http://www.mail-archive.com/emacs-orgmode@gnu.org/msg29840.html">http://www.mail-archive.com/emacs-orgmode@gnu.org/msg29840.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10">10</a></sup> <div class="footpara"><p class="footpara">
<a href="http://osdir.com/ml/emacs-orgmode-gnu/2010-08/msg00926.html">http://osdir.com/ml/emacs-orgmode-gnu/2010-08/msg00926.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.11" class="footnum" href="#fnr.11">11</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.mail-archive.com/emacs-orgmode@gnu.org/msg29903.html">http://www.mail-archive.com/emacs-orgmode@gnu.org/msg29903.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.12" class="footnum" href="#fnr.12">12</a></sup> <div class="footpara"><p class="footpara">
<a href="http://t16web.lanl.gov/Kawano/gnuplot/plot3-e.html">http://t16web.lanl.gov/Kawano/gnuplot/plot3-e.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.13" class="footnum" href="#fnr.13">13</a></sup> <div class="footpara"><p class="footpara">
<a href="http://t16web.lanl.gov/Kawano/gnuplot/plot6-e.html">http://t16web.lanl.gov/Kawano/gnuplot/plot6-e.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.14" class="footnum" href="#fnr.14">14</a></sup> <div class="footpara"><p class="footpara">
Wikipedia: <a href="https://en.wikipedia.org/wiki/World_population#Population_by_region_2">https://en.wikipedia.org/wiki/World_population#Population_by_region_2</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.15" class="footnum" href="#fnr.15">15</a></sup> <div class="footpara"><p class="footpara">
<a href="http://gnuplot-tricks.blogspot.com/2009/05/gnuplot-tricks-many-say-that-it-is.html">http://gnuplot-tricks.blogspot.com/2009/05/gnuplot-tricks-many-say-that-it-is.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.16" class="footnum" href="#fnr.16">16</a></sup> <div class="footpara"><p class="footpara">
<a href="http://gnuplot-tricks.blogspot.com/2009/06/broken-axis-revisited.html">http://gnuplot-tricks.blogspot.com/2009/06/broken-axis-revisited.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.17" class="footnum" href="#fnr.17">17</a></sup> <div class="footpara"><p class="footpara">
<a href="http://gnuplot-tricks.blogspot.com/2010/06/broken-axis-once-more.html">http://gnuplot-tricks.blogspot.com/2010/06/broken-axis-once-more.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.18" class="footnum" href="#fnr.18">18</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.mail-archive.com/emacs-orgmode@gnu.org/msg26014.html">http://www.mail-archive.com/emacs-orgmode@gnu.org/msg26014.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.19" class="footnum" href="#fnr.19">19</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.imagemagick.org/script/index.php">http://www.imagemagick.org/script/index.php</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: John Hendy</p>
<p class="date">Created: 2021-06-15 Tue 18:20</p>
</div>
</body>
</html>
