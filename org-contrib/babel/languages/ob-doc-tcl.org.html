<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.56 in css mode. -->
<html>
  <head>
    <title>ob-doc-tcl.org</title>
    <style type="text/css">
    <!--
      body {
        color: #d6d6d4;
        background-color: #161719;
      }
      .bold {
        /* bold */
        font-weight: bold;
      }
      .comment {
        /* font-lock-comment-face */
        color: #696969;
      }
      .comment-delimiter {
        /* font-lock-comment-delimiter-face */
        color: #696969;
      }
      .constant {
        /* font-lock-constant-face */
        color: #fd971f;
      }
      .custom {
      }
      .function-name {
        /* font-lock-function-name-face */
        color: #b6e63e;
      }
      .highlight-quoted-quote {
        /* highlight-quoted-quote */
        color: #9c91e4;
      }
      .italic {
        /* italic */
        font-style: italic;
      }
      .kc-org-link-url {
        /* kc-org-link-url */
        color: #d02090;
        text-decoration: underline;
      }
      .org-block {
        /* org-block */
        background-color: #000000;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #696969;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #696969;
      }
      .org-document-info {
        /* org-document-info */
        color: #fd971f;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #555556;
      }
      .org-document-title {
        /* org-document-title */
        color: #fd971f;
        font-weight: bold;
      }
      .org-footnote {
        /* org-footnote */
        color: #fd971f;
      }
      .org-hide {
        /* org-hide */
        color: #161719;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #eb4509;
        font-weight: bold;
      }
      .org-level-2 {
        /* org-level-2 */
        color: #f0b144;
        font-weight: bold;
      }
      .org-list-dt {
        /* org-list-dt */
        color: #e2c770;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #7f7f80;
      }
      .org-superstar-header-bullet {
      }
      .org-verbatim {
        /* org-verbatim */
        color: #b6e63e;
      }
      .rainbow-delimiters-depth-1 {
        /* rainbow-delimiters-depth-1-face */
        color: #eb4509;
      }
      .string {
        /* font-lock-string-face */
        color: #e2c770;
      }
      .variable-name {
        /* font-lock-variable-name-face */
        color: #fd971f;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="org-meta-line">#+OPTIONS:    H:3 num:nil toc:2 \n:nil ::t |:t ^:{} -:t f:t *:t tex:t d:(HIDE) tags:not-in-toc</span>
<span class="org-meta-line">#+STARTUP:    align fold nodlcheck hidestars oddeven lognotestate hideblocks</span>
<span class="org-meta-line">#+SEQ_TODO:   TODO(t) INPROGRESS(i) WAITING(w@) | DONE(d) CANCELED(c@)</span>
<span class="org-meta-line">#+TAGS:       Write(w) Update(u) Fix(f) Check(c) noexport(n)</span>
<span class="org-document-info-keyword">#+TITLE:</span>      <span class="org-document-title">Org-babel-tcl
</span><span class="org-document-info-keyword">#+AUTHOR:</span>     <span class="org-document-info">Luis Anaya
</span><span class="org-document-info-keyword">#+EMAIL:</span>      <span class="org-document-info">papoanaya[at]hotmail[dot]com
</span><span class="org-meta-line">#+LANGUAGE:   en</span>
<span class="org-meta-line">#+HTML_LINK_UP:    index.html</span>
<span class="org-meta-line">#+HTML_LINK_HOME:  <a href="https://orgmode.org/worg/">https://orgmode.org/worg/</a></span>

<span class="org-block-begin-line">#+begin_export html
</span><span class="org-block">  &lt;</span><span class="org-block"><span class="function-name">div</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">id</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"subtitle"</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">style</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"float: center; text-align: center;"</span></span><span class="org-block">&gt;
  &lt;</span><span class="org-block"><span class="function-name">p</span></span><span class="org-block">&gt;
  Org-babel support for
  &lt;</span><span class="org-block"><span class="function-name">a</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">href</span></span><span class="org-block">=</span><span class="org-block"><span class="string">"<a href="http://www.tcl.tk/">http://www.tcl.tk/</a>"</span></span><span class="org-block">&gt;tclsh&lt;/</span><span class="org-block"><span class="function-name">a</span></span><span class="org-block">&gt;
  &lt;/</span><span class="org-block"><span class="function-name">p</span></span><span class="org-block">&gt;
  &lt;/</span><span class="org-block"><span class="function-name">p</span></span><span class="org-block">&gt;
  &lt;/</span><span class="org-block"><span class="function-name">div</span></span><span class="org-block">&gt;
</span><span class="org-block-end-line">#+end_export
</span>
<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Introduction
</span><span class="org-verbatim">org-babel-tcl</span> allows Tcl code to be executed directly
within embedded code blocks in Org-mode documents. These code blocks and
its results can be included as the document is exported to documentation
formats. 

The following provides instructions and some examples of tclsh
usage. Since babel is simply allowing native code to run inside of
Org-mode, all tclsh documentation is applicable and valid.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Requirements and Setup
</span>To get Tcl  up and running, you need the <span class="org-verbatim">tclsh</span> interpreter installed in your
system or any of its variants: 

  <span class="org-list-dt">-</span> <span class="org-verbatim">wish</span> if you want GUI support
  <span class="org-list-dt">-</span> <span class="org-verbatim">expect</span> for interactions with the console 
  <span class="org-list-dt">-</span> <span class="org-verbatim">ns2</span> to run network simulations from Org-mode. 

The variable <span class="org-verbatim">org-babel-tcl-command</span> defines the value of the
interpreter that will be run. It defaults to <span class="org-verbatim">tclsh</span>. 

To enable support for Tcl, it must be enabled as part of your
initialization script. For example: 

<span class="org-block-begin-line">#+begin_src emacs-lisp
</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">set up babel support
</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">require</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-quoted-quote">'</span></span><span class="org-block"><span class="constant">org</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">
</span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">require</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-quoted-quote">'</span></span><span class="org-block"><span class="constant">ob-tcl</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">
</span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">add additional languages with (require 'ob-language)
</span></span><span class="org-block-end-line">#+end_src
</span>
<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Babel Header Arguments
</span>
Babel block headers are used to pass various arguments to control the
results of the executed code. The complete list of header arguments
is covered in the Org-mode manual; for now, some options frequently used for
tclsh are:

<span class="org-list-dt">-</span> <span class="org-verbatim">:exports {code, results, both, none}</span>
  <span class="org-list-dt">-</span> When the code is run and the document exported (e.g. to HTML or
    \LaTeX PDF), what should appear? Just the code block itself? Only
    the produced output (in this case a plot of some sort)? Both the
    code and the accompanying results? Or nothing?
<span class="org-list-dt">-</span> <span class="org-verbatim">:results {value, output}</span>
  <span class="org-list-dt">-</span> Controls the results of the output. Only two alternatives are
    allowed: 
  <span class="org-list-dt">-</span> <span class="italic"><span class="org-list-dt">value</span></span><span class="org-list-dt"> ::</span> Returns the value of the last <span class="org-verbatim">return</span> statement in the
               code. and places in <span class="org-verbatim">#+RESULTS:</span>. 
  <span class="org-list-dt">-</span> <span class="italic"><span class="org-list-dt">output</span></span><span class="org-list-dt"> ::</span> Returns the value of the <span class="org-verbatim">puts</span> or <span class="org-verbatim">write</span> statement and
                places those in <span class="org-verbatim">#+RESULTS:</span>. 
<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Overview and Use
</span>Tcl is a complete language that provides a rich set of
facilities. Describing these are beyond the scope of this
manual. However, the examples provided in this guide should 
be easy enough to follow to
those that have program in other languages in the past.  If you are
interested in learning about Tcl, please refer to the official documents
or books on the subject. <span class="org-footnote">[fn:1]</span>

Through this overview, Any of the commands
typed in <span class="org-verbatim">code</span> font below should be assumed to reside in a babel
code block (between <span class="org-verbatim">#+begin_src tcl</span> and <span class="org-verbatim">#+end_src</span>).

To run a Tcl block  and produce a result from the babel block
move the cursor anywhere in the code
block and press <span class="org-verbatim">C-c C-c</span> (Ctrl+C followed by Ctrl+C) and type "yes"
in the minibuffer when asked about executing the code.

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> Basic Use 
</span>The easiest way to use this feature is to create a block of 
<span class="org-verbatim">#+begin_src tcl</span> / <span class="org-verbatim">#+end_src</span> and enter your commands there. The 
default is to return a value being this the last value from a <span class="org-verbatim">return</span>
statement. 

<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+begin_src tcl
  return "Hello"
#+end_src

#+RESULTS: 
: Hello
</span><span class="org-block-end-line">#+end_example
</span>
In this example, pressing C-c C-c will result in the value "Hello" being
written in the <span class="org-verbatim">#+RESULTS:</span>.  Placing a <span class="org-verbatim">puts</span> or <span class="org-verbatim">write</span> statement
will <span class="bold">not</span> show up in the <span class="org-verbatim">#RESULTS:</span> 
To change this behavior, the keyword
<span class="org-verbatim">:results output</span> must be written in the header. For example: 

<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+begin_src tcl :results output
puts "Hi"
return "Hello"
#+end_src 

#+RESULTS:
: Hi
</span><span class="org-block-end-line">#+end_example
</span>
<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> Named Procedures and Tables
</span>The Babel Tcl plugin supports the use of named procedures, calls  and table
operations. The use of these are detailed in the <span class="italic">Org Manual</span>.  This
manual will describe how they are used within the context of a Tcl
program. 

A variable can be passed to a Tcl program which can be used to call the
aforementioned program later on in your org document.  The following
example is a program that just writes the value of the variable. 

<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+name: reflector(x=0)
#+begin_src tcl :results output
puts $x
#+end_src

#+RESULTS: reflector
: 0
</span><span class="org-block-end-line">#+end_example 
</span>
Pressing <span class="org-verbatim">C-c C-c</span> will result in the default value to be written. Calling
the named block later on with a different value will result on that
value been written in the <span class="org-verbatim">#RESULTS:</span> For example: 

<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+call: reflector(20)
#+RESULTS: reflector(20)
: 20
</span><span class="org-block-end-line">#+end_example
</span>
This is not constrained only to <span class="org-verbatim">:results output</span> headers. Procedures in
which the result is a <span class="org-verbatim">value</span> can also be used. For example: 

<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+name: square(x=0)
#+begin_src tcl :results value
return [expr $x * $x]
#+end_src

#+RESULTS: square
: 0
</span><span class="org-block-end-line">#+end_example
</span>
Executing it with C-c C-c with different values will result to that value being
returned. For example:

<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+call: square(x=2)

#+RESULTS: square(x=2)
: 4
</span><span class="org-block-end-line">#+end_example 
</span>
Sending Tcl code as part of the parameter is also supported. For
example: 

<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+call: square(x=[expr 2 + 10])

#+RESULTS: square(x=[expr 2 + 10])
: 144
</span><span class="org-block-end-line">#+end_example 
</span>
Table processing is supported in Tcl blocks. The resultant data
structure in  Tcl is a list of lists. For example: 


<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+tblname: testtbl
| 1 | 2 |
| 3 | 4 |

#+name: processtbl(x=0)
#+begin_src tcl :results output
puts $x
foreach y $x {
  puts [expr [lindex $y 0] * [lindex $y 1]]
}
#+end_src
</span><span class="org-block-end-line">#+end_example
</span>
The program prints the table as a list, add the first and second values and
writing the results. Calling this block later on in the Org document
will result in the following output.

<span class="org-block-begin-line">#+begin_example
</span><span class="custom">#+call: processtbl(x=testtbl)

#+RESULTS: processtbl(x=testtbl)
: {1  2}  {3  4}
: 2
: 12
</span><span class="org-block-end-line">#+end_example
</span>
<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Footnotes
</span>
<span class="org-footnote">[fn:1]</span> Tcl  manual downloads and further information can be obtained
from: <span class="kc-org-link-url"><a href="http://www.tcl.tk/doc/">http://www.tcl.tk/doc/</a></span>
</pre>
  </body>
</html>
