<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.56 in css mode. -->
<html>
  <head>
    <title>intro.org</title>
    <style type="text/css">
    <!--
      body {
        color: #d6d6d4;
        background-color: #161719;
      }
      .bold {
        /* bold */
        font-weight: bold;
      }
      .builtin {
        /* font-lock-builtin-face */
        color: #fd971f;
      }
      .comment {
        /* font-lock-comment-face */
        color: #696969;
      }
      .comment-delimiter {
        /* font-lock-comment-delimiter-face */
        color: #696969;
      }
      .constant {
        /* font-lock-constant-face */
        color: #fd971f;
      }
      .custom {
        /* (:foreground "#f0c613" :weight bold :underline t) */
        color: #f0c613;
        font-weight: bold;
        text-decoration: underline;
      }
      .custom-1 {
        /* (:foreground "#07CA00" :weight bold :underline t) */
        color: #07CA00;
        font-weight: bold;
        text-decoration: underline;
      }
      .doc {
        /* font-lock-doc-face */
        color: #7f7f80;
      }
      .error {
        /* error */
        color: #e74c3c;
      }
      .function-name {
        /* font-lock-function-name-face */
        color: #b6e63e;
      }
      .highlight-numbers-number {
        /* highlight-numbers-number */
        color: #9c91e4;
        font-weight: bold;
      }
      .highlight-quoted-quote {
        /* highlight-quoted-quote */
        color: #9c91e4;
      }
      .highlight-quoted-symbol {
        /* highlight-quoted-symbol */
        color: #66d9ef;
      }
      .italic {
        /* italic */
        font-style: italic;
      }
      .kc-org-link-url {
        /* kc-org-link-url */
        color: #d02090;
        text-decoration: underline;
      }
      .keyword {
        /* font-lock-keyword-face */
        color: #eb4509;
      }
      .org-block {
        /* org-block */
        background-color: #000000;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #696969;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #696969;
      }
      .org-code {
        /* org-code */
        color: #dfd05e;
      }
      .org-document-info {
        /* org-document-info */
        color: #fd971f;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #555556;
      }
      .org-document-title {
        /* org-document-title */
        color: #fd971f;
        font-weight: bold;
      }
      .org-drawer {
        /* org-drawer */
        color: #cd3278;
      }
      .org-footnote {
        /* org-footnote */
        color: #fd971f;
      }
      .org-formula {
        /* org-formula */
        color: #66d9ef;
      }
      .org-headline-done {
        /* org-headline-done */
        color: #555556;
      }
      .org-hide {
        /* org-hide */
        color: #161719;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #eb4509;
        font-weight: bold;
      }
      .org-level-2 {
        /* org-level-2 */
        color: #f0b144;
        font-weight: bold;
      }
      .org-level-3 {
        /* org-level-3 */
        color: #8ec298;
        font-weight: bold;
      }
      .org-level-4 {
        /* org-level-4 */
        color: #5ca8dd;
        font-weight: bold;
      }
      .org-level-5 {
        /* org-level-5 */
        color: #f4a284;
        font-weight: bold;
      }
      .org-link {
        /* org-link */
        color: #fd971f;
        font-weight: bold;
        text-decoration: underline;
      }
      .org-list-dt {
        /* org-list-dt */
        color: #e2c770;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #7f7f80;
      }
      .org-property-value {
        /* org-property-value */
        color: #7f7f80;
      }
      .org-quote {
        /* org-quote */
        color: #cfc0c5;
        background-color: #212224;
        font-style: italic;
      }
      .org-special-keyword {
        /* org-special-keyword */
        color: #7f7f80;
      }
      .org-superstar-header-bullet {
      }
      .org-table {
        /* org-table */
        color: #9c91e4;
      }
      .org-tag {
        /* org-tag */
        color: #e2c770;
      }
      .org-verbatim {
        /* org-verbatim */
        color: #b6e63e;
      }
      .rainbow-delimiters-depth-1 {
        /* rainbow-delimiters-depth-1-face */
        color: #eb4509;
      }
      .rainbow-delimiters-depth-2 {
        /* rainbow-delimiters-depth-2-face */
        color: #fd971f;
      }
      .rainbow-delimiters-depth-3 {
        /* rainbow-delimiters-depth-3-face */
        color: #b6e63e;
      }
      .sh-heredoc {
        /* sh-heredoc */
        color: #e2c770;
      }
      .sh-quoted-exec {
        /* sh-quoted-exec */
        color: #9c91e4;
        font-weight: bold;
      }
      .string {
        /* font-lock-string-face */
        color: #e2c770;
      }
      .type {
        /* font-lock-type-face */
        color: #66d9ef;
      }
      .variable-name {
        /* font-lock-variable-name-face */
        color: #fd971f;
      }
      .warning {
        /* font-lock-warning-face */
        color: #e2c770;
      }
      .whitespace-tab {
        /* whitespace-tab */
        color: #4e4e4e;
        background-color: #2d2e2e;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="org-document-info-keyword">#+TITLE:</span>      <span class="org-document-title">Babel: Introduction
</span><span class="org-document-info-keyword">#+AUTHOR:</span>     <span class="org-document-info">Eric Schulte, Dan Davison, Tom Dye
</span><span class="org-document-info-keyword">#+EMAIL:</span>      <span class="org-document-info">schulte.eric at gmail dot com, davison at stats dot ox dot ac dot uk, tsd at tsdye dot com
</span><span class="org-meta-line">#+OPTIONS:    H:3 num:nil toc:2 \n:nil ::t |:t ^:{} -:t f:t *:t tex:t d:(HIDE) tags:not-in-toc</span>
<span class="org-meta-line">#+STARTUP:    align fold nodlcheck hidestars oddeven lognotestate hideblocks</span>
<span class="org-meta-line">#+SEQ_TODO:   TODO(t) INPROGRESS(i) WAITING(w@) | DONE(d) CANCELED(c@)</span>
<span class="org-meta-line">#+TAGS:       Write(w) Update(u) Fix(f) Check(c) noexport(n)</span>
<span class="org-meta-line">#+LANGUAGE:   en</span>
<span class="org-meta-line">#+HTML_LINK_UP:  index.php</span>
<span class="org-meta-line">#+HTML_LINK_HOME: <a href="https://orgmode.org/worg">https://orgmode.org/worg</a></span>

<span class="comment"># This file is released by its authors and contributors under the GNU</span>
<span class="comment"># Free Documentation license v1.3 or later, code examples are released</span>
<span class="comment"># under the GNU General Public License v3 or later.</span>

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Improving this document</span><span class="whitespace-tab">                                       </span><span class="org-level-1">   </span><span class="org-level-1"><span class="org-tag">:noexport:</span></span><span class="org-level-1">
</span><span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom-1">DONE</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="org-headline-done">Document slice indexing of tables</span></span><span class="org-level-2">
</span><span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom-1">DONE</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="org-headline-done">Document synonymous alternatives</span></span><span class="org-level-2">
</span>   {call,lob}, {source, function, srcname}, {results, resname}
<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom-1">DONE</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="org-headline-done">Describe useful functions</span></span><span class="org-level-2">
</span>   <span class="org-list-dt">-</span> `org-babel-execute-buffer'
   <span class="org-list-dt">-</span> `org-babel-execute-subtree'

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom-1">DONE</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="org-headline-done">Language support</span></span><span class="org-level-2">
</span>   Hopefully we will be breaking out a separate section for
   each language, and expanding the portion which documents the actual
   usage of header-arguments and noweb references as those sections are
   woefully out of date.
<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom-1">DONE</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="org-headline-done">Document noweb references</span></span><span class="org-level-2">
</span><span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> </span><span class="org-level-3"><span class="custom-1">DONE</span></span><span class="org-level-3"> </span><span class="org-level-3"><span class="org-headline-done">Why is :noweb needed for execution but not for tangling?</span></span><span class="org-level-3">
</span><span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom">TODO</span></span><span class="org-level-2"> Developments
</span>   <span class="org-list-dt">-</span> org-babel can now cache the results of source block execution to avoid
     rerunning the same calculation.  The cache uses a sha1 hash key of the
     source code body and the header arguments to determine if
     recalculation is required.  These hash keys are kept mostly hidden in
     the #+resname line of the results of the block.  This behavior is
     turned off by default.  It is controlled through the :cache
     and :nocache header arguments.  To enable caching on a single block
     add the :cache header argument, to enable global caching change the
     value of your `org-babel-default-header-args' variable as follows

     (setq org-babel-default-header-args
     (cons '(:cache)
     (assq-delete-all :nocache org-babel-default-header-args)))

   <span class="org-list-dt">-</span> It is now possible to fold results by tabbing on the beginning of the
<span class="org-meta-line">     #+resname line.  This can be done automatically to all results on</span>
     opening of a file by adding the following to your org-mode hook

     (add-hook 'org-mode-hook 'org-babel-result-hide-all)

   <span class="org-list-dt">-</span> allow header argument values to be lisp forms, for example the
     following is now valid

     :file (format "%s/images/pca-scatter.png" dir)

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom-1">DONE</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="org-headline-done">Useful variables</span></span><span class="org-level-2">
</span>   <span class="org-list-dt">-</span> # -<span class="bold">- org-src-preserve-indentation: t --
</span><span class="org-hide"><span class="bold">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom">TODO</span></span><span class="org-level-2"> Language specific header arguments
</span>   <span class="org-list-dt">-</span>    org-babel: capture graphical output from R

   If a [:file filename.ext] header arg is provided, then all graphical
   output from the source block is captured on disk, and output of the
   source block is a link to the resulting file, as with the
   graphics-only languages such as gnuplot, ditaa, dot, asymptote. An
   attempt is made to find a graphics device corresponding to the file
   extension (currently .png, .jpg, .jpeg, .tiff, .bmp, .pdf, .ps,
   .postscript are recognised); if that fails, png format output is
   created.

   Additionally, values for several arguments to the R graphics
   device can be passed using header args:

   :width :height :bg :units :pointsize
   :antialias :quality :compression :res :type
   :family :title :fonts :version :paper :encoding
   :pagecentre :colormodel :useDingbats :horizontal

   Arguments to the R graphics device that are not supported as header
   args can be passed as a string in R argument syntax, using the header
   arg :R-dev-args

   An example block is (although both bg and fg can be passed directly as
   header args)

   \#+begin_src R :file z.pdf :width 8 :height 8 :R-dev-args bg="olivedrab", fg="hotpink"
   plot(matrix(rnorm(100), ncol=2), type="l")
   \#+end_src

   <span class="org-list-dt">-</span> Yes, I think we do want a version of this for python and ruby et al. In
   your example, the filename is created in python. I suggest doing it
   slightly differently, something like this.

<span class="org-meta-line">   #+name: fileoutput</span>
<span class="org-block-begin-line">   #+begin_src python :file outfile.txt
</span><span class="org-block"> </span><span class="org-block"><span class="keyword">def</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">savetofile</span></span><span class="org-block">(result, filename):
     </span><span class="org-block"><span class="keyword">with</span></span><span class="org-block"> </span><span class="org-block"><span class="builtin">open</span></span><span class="org-block">(filename, </span><span class="org-block"><span class="string">'w'</span></span><span class="org-block">) </span><span class="org-block"><span class="keyword">as</span></span><span class="org-block"> f:
         f.write(</span><span class="org-block"><span class="builtin">str</span></span><span class="org-block">(result))
 savetofile(</span><span class="org-block"><span class="highlight-numbers-number">78</span></span><span class="org-block">, </span><span class="org-block"><span class="string">'outfile.txt'</span></span><span class="org-block">)
 </span><span class="org-block"><span class="highlight-numbers-number">55</span></span><span class="org-block">
</span><span class="org-block-end-line">   #+end_src
</span>
<span class="org-meta-line">   #+resname: fileoutput</span>
   <span class="error"><a href="file:outfile.txt">file:outfile.txt</a></span>

   This functionality is now available for ruby &amp; python in branch
   ded-babel of git://orgmode.org/org-mode/babel.git.

   So here, if you specify :file &lt;filepath&gt; ruby/python blindly outputs a
   link to &lt;filepath&gt;, regardless of the contents of the
   code. Responsibility for creating useful contents of &lt;filepath&gt; lies
   with the code. Notice that with this you have to specify the output file
   twice: once as an org-babel directive, and once in the python code. This
   is in contrast to the graphics languages (dot, ditaa, asymptote), where
   the results <span class="bold">automatically</span> get sent to the file specified by :file. The
   same is also true now for graphical output from R.

   The difference with python, ruby et al is that they might create file
   output in a variety of ways which we can't anticipate, so we can't
   automatically send output to the file. In contrast, the graphics
   language <span class="bold">always</span> create file output and always do it in the same
   way. [And in R it is possible to divert all graphical output to file] A
   possible extension of the above might be to use a "magic variable" so
   that a python variable is created e.g. <span class="bold">_org_babel_output_file_</span> that
   always holds a string corresponding to the file specified by :file. Eric
   may have further ideas / views here.


<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="custom-1">DONE</span></span><span class="org-level-2"> </span><span class="org-level-2"><span class="org-headline-done">What function is bound to C-c '?</span></span><span class="org-level-2">
</span>   <span class="org-list-dt">-</span> this document notes two different functions
<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Introduction
</span>  <span class="org-drawer">:PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">introduction</span>
  <span class="org-drawer">:END:</span>

  Babel is about letting <span class="org-link"><a href="file:languages/index.org">many different languages</a></span> work together.
  Programming languages live in blocks inside natural language
  <span class="kc-org-link-url"><a href="https://orgmode.org/">Org-mode</a></span> documents.  A piece of data may pass from a table to a
  Python code block, then maybe move on to an <span class="org-verbatim">R</span> code block, and
  finally end up embedded as a value in the middle of a paragraph or
  possibly pass through a <span class="org-verbatim">gnuplot</span> code block and end up as a plot
  embedded in the document.

  Through extending <span class="kc-org-link-url"><a href="https://orgmode.org/">Org-mode</a></span> with several features for editing
  exporting and executing source code Babel turns Org-mode into a tool
  for both <span class="italic">Literate Programming</span> and <span class="italic">Reproducible Research</span>.

  Babel augments <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Literal-examples.html">Org-mode support for code blocks</a></span> by providing:

  <span class="org-list-dt">-</span> interactive and on-export execution of code blocks;
  <span class="org-list-dt">-</span> code blocks as functions that can be parameterised, refer to
    other code blocks, and be called remotely; and
  <span class="org-list-dt">-</span> export to files for literate programming.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Overview
</span>  Babel provides new features on a few different fronts, and
  different people may want to start in different places.

  <span class="org-list-dt">-</span> <span class="org-list-dt">Using 'src' blocks in Org mode ::</span>
       If you are not familiar with creating 'src' blocks in an Org-mode
       buffer, and moving between that buffer and the language major-mode
       edit buffer, then you should have a look at the relevant section
       in the <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Literal-examples.html">Org manual</a></span> and <span class="org-link"><a href="#source-code-blocks">below</a></span>, try it out, and come back.
  <span class="org-list-dt">-</span> <span class="org-list-dt">Executing code ::</span>
       The core of Babel is its ability to execute code in Org-mode
       'src' blocks, taking input from other blocks and tables, with
       output to further blocks and tables. This is described starting
       <span class="org-link"><a href="#source-code-execution">here</a></span>.
  <span class="org-list-dt">-</span> <span class="org-list-dt">Literate Programming ::</span>
       If you are a programmer writing code that you would normally
       execute in some other way (e.g. from the command line, or sourcing
       it into an interactive session), then a simple introduction to
       Babel is to place your code in blocks in an Org-mode file, and to
       use Babel's <span class="org-link"><a href="#literate-programming">Literate Programming</a></span> support to extract pure code
       from your Org files.

  All of these use cases, as well as exhaustive documentation of the
  features of Babel are covered in the <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Working-with-source-code.html#Working-with-source-code">Working with Source Code</a></span>
  section of the Org manual.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Initial Configuration
</span>  <span class="org-drawer">:PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">getting-started</span>
  <span class="org-special-keyword">:results:</span>  <span class="org-property-value">silent</span>
  <span class="org-drawer">:END:</span>

  If you have a working Emacs installation, then getting started with
  Babel is a simple process.

  <span class="org-list-dt">1)</span> If you are running Emacs24 a current version of Org-mode with
     Babel is already available by default.  Otherwise, it is strongly
     recommended that you update to the latest version of Org-mode by
     <span class="kc-org-link-url"><a href="https://orgmode.org/worg/org-faq.html#keeping-current-with-Org-mode-development">keeping current with Org-mode development</a></span>.  As of Org-mode 7.0,
     Babel is included as part of Org-mode.

  <span class="org-list-dt">2)</span> Optionally activate the subset of languages that you will want
     to execute with Babel.  See <span class="org-link"><a href="file:languages/index.org::#configure">Configure active languages</a></span>
     instructions.  Emacs Lisp is activated by default so this step
     can be skipped for now and all <span class="org-verbatim">emacs-lisp</span> examples will still
     work as expected.

  <span class="org-list-dt">3)</span> If you have made any changes don't forget to evaluate your
     modified .emacs.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Code Blocks
</span>  <span class="org-drawer">:PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">source-code-blocks</span>
  <span class="org-drawer">:END:</span>

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> Code Blocks in Org
</span>   <span class="org-drawer">:PROPERTIES:</span>
   <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">source-code-blocks-org</span>
   <span class="org-drawer">:END:</span>

   Babel is all about <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Literal-examples.html">code blocks</a></span> in Org-mode. If you are
   unfamiliar with the notion of a code block in Org-mode, where they
   are called 'src' blocks, please have a look at the <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Literal-examples.html">Org-mode manual</a></span>
   before proceeding.

   Code blocks in supported languages can occur anywhere in an
   Org-mode file.  Code blocks can be entered directly into the
   Org-mode file, but it is often easier to enter code with the
   function <span class="org-verbatim">org-edit-src-code</span>, which is called with the keyboard
   shortcut, C-c '.  This places the code block in a new buffer with
   the appropriate mode activated.

<span class="org-block-begin-line">   #+begin_src org
</span><span class="org-block">  ,#+begin_src language org-switches
  ,body
  ,#+end_src
</span><span class="org-block-end-line">   #+end_src
</span>
   For example, a code block of <span class="kc-org-link-url"><a href="http://www.ruby-lang.org/">ruby</a></span> code looks like this in
   an Org-mode file:

<span class="org-block-begin-line">   #+begin_src org
</span><span class="org-block">  ,#+begin_src ruby
  ,require 'date'
  ,"This file was last evaluated on </span><span class="org-block"><span class="org-tag"><span class="org-tag">#{Date</span></span></span><span class="org-block">.today}"
  ,#+end_src
</span><span class="org-block-end-line">   #+end_src
</span>
<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> Code Blocks in Babel
</span>   <span class="org-drawer">:PROPERTIES:</span>
   <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">source-code-blocks-babel</span>
   <span class="org-drawer">:END:</span>

   Babel adds some new elements to code blocks. The basic
   structure becomes:

<span class="org-block-begin-line">   #+begin_src org
</span><span class="org-block">  ,#+begin_src language  org-switches header-arguments
  ,body
  ,#+end_src
</span><span class="org-block-end-line">   #+end_src
</span>

   <span class="org-list-dt">-</span> <span class="org-list-dt">language ::</span> The language of the code in the source-code block. Valid
<span class="whitespace-tab">        </span>values must be members of <span class="org-verbatim">org-babel-interpreters</span>.
   <span class="org-list-dt">-</span> <span class="org-list-dt">header-arguments ::</span> Header arguments control many facets of the
<span class="whitespace-tab">        </span>evaluation and output of source-code blocks.  See the
<span class="whitespace-tab">        </span><span class="kc-org-link-url"><a href="https://orgmode.org/manual/Header-arguments.html#Header-arguments">Header
</a></span><span class="whitespace-tab">        </span><span class="kc-org-link-url"><a href="https://orgmode.org/manual/Header-arguments.html#Header-arguments">Arguments</a></span> section for a complete review of available header
<span class="whitespace-tab">        </span>arguments.
   <span class="org-list-dt">-</span> <span class="org-list-dt">body ::</span> The source code to be evaluated.  An important key-binding
<span class="whitespace-tab">        </span>is =&#8203;C-c '&#8203;<span class="org-verbatim">.  This calls </span><span class="org-verbatim"><span class="org-verbatim">org-edit-src-code</span></span>, a function that brings
<span class="whitespace-tab">        </span>up an edit buffer containing the code using the Emacs major mode
<span class="whitespace-tab">        </span>appropriate to the language.  You can edit your code block
<span class="whitespace-tab">        </span>as you regularly would in Emacs.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Source Code Execution
</span>  <span class="org-drawer">:PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">source-code-execution</span>
  <span class="org-drawer">:END:</span>

  Babel executes code blocks for <span class="bold">interpreted</span> languages such
  as shell, python, R, etc. by passing code to the interpreter, which
  must be installed on your system.  You control what is done with the
  results of execution.

  Here are examples of code blocks in three different languages,
  followed by their output. If you are viewing the Org-mode version of
  this document in Emacs, place point anywhere inside a block and press
  C-c C-c to run the code<span class="org-footnote">[fn:1]</span> (and feel free to alter it!).
<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> Ruby
</span>    In the Org-mode file:
    <span class="org-code">: #+begin_src ruby
</span>    <span class="org-code">: "This file was last evaluated on </span><span class="org-code"><span class="org-tag">#{Date</span></span><span class="org-code">.today}"
</span>    <span class="org-code">: #+end_src
</span>
    HTML export of code:
<span class="org-block-begin-line">    #+begin_src ruby
</span><span class="org-block"><span class="string">"This file was last evaluated on </span></span><span class="org-block"><span class="variable-name"><span class="org-tag">#{Date</span></span></span><span class="org-block"><span class="variable-name">.today}</span></span><span class="org-block"><span class="string">"</span></span><span class="org-block">
</span><span class="org-block-end-line">    #+end_src
</span>
    HTML export of the resulting string:
<span class="org-meta-line">    #+resname:</span>
    <span class="org-code">: This file was last evaluated on 2009-08-09
</span>
<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> Shell
</span>    In the Org-mode file:
    <span class="org-code">: #+begin_src sh
</span>    <span class="org-code">:   echo "This file takes up `du -h org-babel.org |sed 's/\([0-9k]*\)[ ]*org-babel.org/\1/'`"
</span>    <span class="org-code">: #+end_src
</span>
    HTML export of code:
<span class="org-block-begin-line">    #+begin_src sh
</span><span class="org-block">  </span><span class="org-block"><span class="type">echo</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"This file takes up </span></span><span class="org-block"><span class="string"><span class="sh-quoted-exec">`du -h org-babel.org |sed 's/\([0-9k]*\)[ ]*org-babel.org/\1/'`</span></span></span><span class="org-block"><span class="string">"</span></span><span class="org-block">
</span><span class="org-block-end-line">    #+end_src
</span>
    HTML export of the resulting string:
<span class="org-meta-line">    #+resname:</span>
    <span class="org-code">: This file takes up  36K
</span>
<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> </span><span class="kc-org-link-url"><a href="http://www.r-project.org/">R</a></span><span class="org-level-3">
</span>    What are the most common words in this file?
    In the Org-mode file:
    <span class="org-code">: #+begin_src R :colnames yes
</span>    <span class="org-code">:   words &lt;- tolower(scan("intro.org", what="", na.strings=c("|",":")))
</span>    <span class="org-code">:   t(sort(table(words[nchar(words) &gt; 3]), decreasing=TRUE)[1:10])
</span>    <span class="org-code">: #+end_src
</span>
    HTML export of code:

<span class="org-block-begin-line">    #+begin_src R :colnames yes
</span>  words &lt;- tolower(scan("intro.org", what="", na.strings=c("|",":")))
  t(sort(table(words[nchar(words) &gt; 3]), decreasing=TRUE)[1:10])
<span class="org-block-end-line">    #+end_src
</span>
<span class="org-meta-line">    #+RESULTS:</span>
    <span class="org-table">| code | org-mode | #+end_src | #+begin_src | block | with | babel | that | #+name: | this |</span>
    <span class="org-table">|------+----------+-----------+-------------+-------+------+-------+------+---------+------|</span>
    <span class="org-table">|   85 |       60 |        47 |          44 |    40 |   38 |    35 |   34 |      33 |   33 |</span>

<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> </span><span class="kc-org-link-url"><a href="http://ditaa.sourceforge.net/">ditaa</a></span><span class="org-level-3">
</span>
    In the Org-mode file:
    <span class="org-code">: #+begin_src ditaa :file blue.png :cmdline -r
</span>    <span class="org-code">: +---------+
</span>    <span class="org-code">: | cBLU    |
</span>    <span class="org-code">: |         |
</span>    <span class="org-code">: |    +----+
</span>    <span class="org-code">: |    |cPNK|
</span>    <span class="org-code">: |    |    |
</span>    <span class="org-code">: +----+----+
</span>    <span class="org-code">: #+end_src
</span>
    HTML export of code:
<span class="org-block-begin-line">    #+begin_src ditaa :file blue.png :cmdline -r
</span><span class="org-block">+---------+
| cBLU    |
|         |
|    +----+
|    |cPNK|
|    |    |
+----+----+
</span><span class="org-block-end-line">    #+end_src
</span>
    HTML export of the resulting image:
<span class="org-meta-line">    #+resname:</span>
    <span class="org-link"><a href="file:../../images/babel/blue.png">file:../../images/babel/blue.png</a></span>

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> Capturing the Results of Code Evaluation
</span>   <span class="org-drawer">:PROPERTIES:</span>
   <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">results</span>
   <span class="org-drawer">:END:</span>
   Babel provides two fundamentally different modes for capturing
   the results of code evaluation: functional mode and scripting
   mode.  The choice of mode is specified by the <span class="org-verbatim">:results</span> header
   argument.
<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> </span><span class="org-level-3"><span class="org-verbatim">:results value</span></span><span class="org-level-3"> (functional mode)
</span>    <span class="org-drawer">:PROPERTIES:</span>
    <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">results-value</span>
    <span class="org-drawer">:END:</span>
    The 'result' of code evaluation is the <span class="bold">value</span> of the last
    statement in the code block. In functional mode, the
    code block is a function with a return value. The return
    value of one code block can be used as input for another
    code block, even one in a different language.  In this
    way, Babel becomes a <span class="org-link"><a href="#meta-programming-language">meta-programming language</a></span>. If the block
    returns tabular data (a vector, array or table of some sort) then
    this will be held as an Org-mode table in the buffer. This
    setting is the default.

    For example, consider the following block of python code and its
    output.

<span class="org-block-begin-line">    #+begin_src python :results value
</span><span class="org-block"><span class="keyword">import</span></span><span class="org-block"> time
</span><span class="org-block"><span class="keyword">print</span></span><span class="org-block">(</span><span class="org-block"><span class="string">"Hello, today's date is %s"</span></span><span class="org-block"> % time.ctime())
</span><span class="org-block"><span class="keyword">print</span></span><span class="org-block">(</span><span class="org-block"><span class="string">'Two plus two is'</span></span><span class="org-block">)
</span><span class="org-block"><span class="keyword">return</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-numbers-number">2</span></span><span class="org-block"> + </span><span class="org-block"><span class="highlight-numbers-number">2</span></span><span class="org-block">
</span><span class="org-block-end-line">    #+end_src
</span>
<span class="org-meta-line">    #+resname:</span>
    <span class="org-code">: 4
</span>
    Notice that, in functional mode, the output consists of the value of
    the last statement and nothing else.

<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> </span><span class="org-level-3"><span class="org-verbatim">:results output</span></span><span class="org-level-3"> (scripting mode)
</span>    <span class="org-drawer">:PROPERTIES:</span>
    <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">results-output</span>
    <span class="org-drawer">:END:</span>

    In scripting mode, Babel captures the text output of the
    code block and places it in the Org-mode buffer. It is
    called scripting mode because the code block contains a series of
    commands, and the output of each command is returned. Unlike
    functional mode, the code block itself has no return value
    apart from the output of the commands it contains.<span class="org-footnote">[fn:2]</span>

    Consider the result of evaluating this code block with
    scripting mode.

<span class="org-meta-line">    #+name: name</span>
<span class="org-block-begin-line">    #+begin_src python :results output
</span><span class="org-block"><span class="keyword">import</span></span><span class="org-block"> time
</span><span class="org-block"><span class="keyword">print</span></span><span class="org-block">(</span><span class="org-block"><span class="string">"Hello, today's date is %s"</span></span><span class="org-block"> % time.ctime())
</span><span class="org-block"><span class="keyword">print</span></span><span class="org-block">(</span><span class="org-block"><span class="string">'Two plus two is'</span></span><span class="org-block">)
</span><span class="org-block"><span class="highlight-numbers-number">2</span></span><span class="org-block"> + </span><span class="org-block"><span class="highlight-numbers-number">2</span></span><span class="org-block">
</span><span class="org-block-end-line">    #+end_src
</span>
<span class="org-meta-line">    #+resname: name</span>
    <span class="org-code">: Hello, today's date is Wed Nov 11 18:50:36 2009
</span>    <span class="org-code">: Two plus two is
</span>
    Here, scripting mode returned the text that python sent to <span class="org-verbatim">stdout</span>.  Because
    the code block doesn't include a <span class="org-verbatim">print()</span> statement for the last
    value, <span class="org-verbatim">(2 + 2)</span>, 4 does not appear in the results.

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> Session-based Evaluation
</span>   For some languages, such as python, R, ruby and shell, it is
   possible to run an interactive session as an "inferior process"
   within Emacs. This means that an environment is created containing
   data objects that persist between different source code
   blocks. Babel supports evaluation of code within such sessions
   with the <span class="org-verbatim">:session</span> header argument. If the header argument is
   given a value then that will be used as the name of the session.
   Thus, it is possible to run separate simultaneous sessions in the
   same language.

   Session-based evaluation is particularly useful for prototyping and
   debugging.  The function <span class="org-verbatim">org-babel-pop-to-session</span> can be used to
   switch to the session buffer.

   Once a code block is finished, it is often best to execute it
   outside of a session, so the state of the environment in which it
   executes will be certain.

   With R, the session will be under the control of <span class="kc-org-link-url"><a href="http://ess.r-project.org/">Emacs Speaks
   Statistics</a></span> as usual, and the full power of ESS is thus still
   available, both in the R session, and when switching to the R code
   edit buffer with =&#8203;C-c '&#8203;=.

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> Arguments to Code Blocks
</span>   <span class="org-drawer">:PROPERTIES:</span>
   <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">arguments-to-source-code-blocks</span>
   <span class="org-drawer">:END:</span>
   Babel supports parameterisation of code blocks, i.e.,
   arguments can be passed to code blocks, which gives them
   the status of <span class="bold">functions</span>. Arguments can be passed to code blocks in
   both functional and scripting modes.

<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> Simple example of using a code block as a function
</span>
    First let's look at a very simple example. The following source
    code block defines a function, using python, that squares its argument.

<span class="org-meta-line">    #+name: square</span>
<span class="org-meta-line">    #+header: :var x=0</span>
<span class="org-block-begin-line">    #+begin_src python
</span><span class="org-block"><span class="keyword">return</span></span><span class="org-block"> x*x
</span><span class="org-block-end-line">    #+end_src
</span>
    In the Org-mode file, the function looks like this:
    <span class="org-code">: #+name: square
</span>    <span class="org-code">: #+header: :var x=0
</span>    <span class="org-code">: #+begin_src python
</span>    <span class="org-code">: return x*x
</span>    <span class="org-code">: #+end_src
</span>

    Now we use the source block:

    <span class="org-code">: #+call: square(x=6)
</span>
    (<span class="italic">for information on the</span> <span class="org-verbatim">call</span> <span class="italic">syntax see</span> <span class="org-link"><a href="#library-of-babel">Library of Babel</a></span>)

<span class="org-meta-line">    #+call: square(x=6)</span>

<span class="org-meta-line">    #+results: square(x=6)</span>
    <span class="org-code">: 36
</span>
<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> A more complex example using an Org-mode table as input
</span>
    In this example we define a function called <span class="org-verbatim">fibonacci-seq</span>, using
    Emacs Lisp.  The function <span class="org-verbatim">fibonacci-seq</span> computes a Fibonacci
    sequence.  The function takes a single argument, in this case, a
    reference to an Org-mode table.

    Here is the Org-mode table that is passed to <span class="org-verbatim">fibonacci-seq</span>:

<span class="org-meta-line">    #+name: fibonacci-inputs</span>
    <span class="org-table">| 1 | 2 | 3 | 4 |  5 |  6 |  7 |  8 |  9 | 10 |</span>
    <span class="org-table">| 2 | 4 | 6 | 8 | 10 | 12 | 14 | 16 | 18 | 20 |</span>

    The table looks like this in the Org-mode buffer:
    <span class="org-code">: #+tblname: fibonacci-inputs
</span>    <span class="org-code">: | 1 | 2 | 3 | 4 |  5 |  6 |  7 |  8 |  9 | 10 |
</span>    <span class="org-code">: | 2 | 4 | 6 | 8 | 10 | 12 | 14 | 16 | 18 | 20 |
</span>
    The <span class="kc-org-link-url"><a href="http://www.gnu.org/software/emacs/manual/elisp.html">Emacs Lisp</a></span> source code:
<span class="org-meta-line">    #+name: fibonacci-seq</span>
<span class="org-block-begin-line">    #+begin_src emacs-lisp :var fib-inputs=fibonacci-inputs
</span><span class="org-block">  </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="keyword">defun</span></span><span class="org-block"> </span><span class="org-block"><span class="function-name">fibonacci</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block">n</span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block">
    </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="keyword">if</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="keyword">or</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">=</span></span><span class="org-block"> n </span><span class="org-block"><span class="highlight-numbers-number">0</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">=</span></span><span class="org-block"> n </span><span class="org-block"><span class="highlight-numbers-number">1</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block">
        n
      </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="constant">+</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block">fibonacci </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">-</span></span><span class="org-block"> n </span><span class="org-block"><span class="highlight-numbers-number">1</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block">fibonacci </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">-</span></span><span class="org-block"> n </span><span class="org-block"><span class="highlight-numbers-number">2</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">

  </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">mapcar</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="keyword">lambda</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block">row</span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block">
            </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="constant">mapcar</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-quoted-quote"><span class="org-tag">#'</span></span></span><span class="org-block"><span class="highlight-quoted-symbol"><span class="org-tag">fibonacci</span></span></span><span class="org-block"> row</span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"> </span><span class="org-block"><span class="warning">fib-inputs</span></span><span class="org-block"><span class="warning"><span class="rainbow-delimiters-depth-1">)</span></span></span><span class="org-block">
</span><span class="org-block-end-line">    #+end_src
</span>
    In the Org-mode buffer the function looks like this:
    <span class="org-code">: #+name: fibonacci-seq
</span>    <span class="org-code">: #+begin_src emacs-lisp :var fib-inputs=fibonacci-inputs
</span>    <span class="org-code">:   (defun fibonacci (n)
</span>    <span class="org-code">:     (if (or (= n 0) (= n 1))
</span>    <span class="org-code">:         n
</span>    <span class="org-code">:       (+ (fibonacci (- n 1)) (fibonacci (- n 2)))))
</span>    <span class="org-code">:
</span>    <span class="org-code">:   (mapcar (lambda (row)
</span>    <span class="org-code">:             (mapcar </span><span class="org-code"><span class="org-tag">#'fibonacci</span></span><span class="org-code"> row)) fib-inputs)
</span>    <span class="org-code">: #+end_src
</span>
    The return value of <span class="org-verbatim">fibonacci-seq</span> is a table:
<span class="org-meta-line">    #+resname:</span>
    <span class="org-table">| 1 | 1 | 2 |  3 |  5 |   8 |  13 |  21 |   34 |   55 |</span>
    <span class="org-table">| 1 | 3 | 8 | 21 | 55 | 144 | 377 | 987 | 2584 | 6765 |</span>

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> In-line Code Blocks
</span>   Code can be evaluated in-line using the following syntax:

   <span class="org-code">: Without header args: src_lang{code} or with header args: src_lang[args]{code},
</span>   <span class="org-code">: for example src_python[:session]{10*x}, where x is a variable existing in the
</span>   <span class="org-code">: python session.
</span>
<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> Code Block Body Expansion
</span>   Babel "expands" code blocks prior to evaluation, i.e., the
   evaluated code comprises the code block contents augmented with
   code that assigns referenced data to variables. It is possible to
   preview expanded contents, and also to expand code during
   tangling.  Expansion takes into account header arguments and
   variables.

   <span class="org-list-dt">-</span> <span class="org-list-dt">preview ::</span> <span class="org-verbatim">C-c M-b p</span> is bound to <span class="org-verbatim">org-babel-expand-src-block</span>.  It
<span class="whitespace-tab">        </span>can be used inside a code block to preview the expanded
<span class="whitespace-tab">        </span>contents. This facility is useful for debugging.

   <span class="org-list-dt">-</span> <span class="org-list-dt">tangling ::</span> The expanded body can be tangled.  Tangling this way includes
<span class="whitespace-tab">        </span>variable values that  may be
<span class="whitespace-tab">        </span>- the results of other code blocks,
<span class="whitespace-tab">        </span>- variables stored in headline properties, or
<span class="whitespace-tab">        </span>- tables.

<span class="whitespace-tab">        </span>One possible use for tangling expanded code block is for emacs
<span class="whitespace-tab">        </span>initialization.  Values such as user names and passwords can be
<span class="whitespace-tab">        </span>stored in headline properties or in tables.  The <span class="org-verbatim">:no-expand</span>
<span class="whitespace-tab">        </span>header argument can be used to inhibit expansion of a code block
<span class="whitespace-tab">        </span>during tangling.

   Here is an example of a code block and its resulting expanded body.

   The data are kept in a table:
<span class="org-meta-line">   #+tblname: user-data</span>
   <span class="org-table">| username | john-doe |</span>
   <span class="org-table">| password | abc123   |</span>

   The code block refers to the data table:
<span class="org-meta-line">   #+name: setup-my-account</span>
<span class="org-block-begin-line">   #+begin_src emacs-lisp :rownames yes :var data=user-data
</span><span class="org-block">  </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> my-special-username </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">first</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="constant">first</span></span><span class="org-block"> data</span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">
  </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> my-special-password </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">first</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="function-name">second</span></span><span class="org-block"> data</span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">
</span><span class="org-block-end-line">   #+end_src
</span>
   With point inside the code block,  <span class="org-verbatim">C-c M-b p</span> expands the contents:
<span class="org-block-begin-line">   #+begin_src emacs-lisp
</span><span class="org-block">  </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="keyword">let</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block">data </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="keyword">quote</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="string">"john-doe"</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="string">"abc123"</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block">
  </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> my-special-username </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="constant">first</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">first</span></span><span class="org-block"> data</span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block">
  </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> my-special-password </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="constant">first</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="function-name">second</span></span><span class="org-block"> data</span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block">
  </span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">
</span><span class="org-block-end-line">   #+end_src
</span>

<span class="org-hide">*</span><span class="org-level-2"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-2"> A Meta-programming Language for Org-mode
</span>   <span class="org-drawer">:PROPERTIES:</span>
   <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">meta-programming-language</span>
   <span class="org-drawer">:END:</span>

   Because the return value of a function written in one language can be
   passed to a function written in another language, or to an Org-mode
   table, which is itself programmable, Babel can be used as a
   meta-functional programming language.  With Babel, functions from
   many languages can work together.  You can mix and match languages,
   using each language for the tasks to which it is best suited.

   For example, let's take some system diagnostics in the shell and graph them with R.

   <span class="org-list-dt">1.</span> Create a code block, using shell code, to list
      directories in our home directory, together with their
      sizes. Babel automatically converts the output into an Org-mode
      table.

   <span class="org-code">: #+name: directories
</span>   <span class="org-code">: #+begin_src sh :results replace
</span>   <span class="org-code">:   cd ~ &amp;&amp; du -sc * |grep -v total
</span>   <span class="org-code">: #+end_src
</span>
<span class="org-meta-line">   #+resname: directories</span>
   <span class="org-table">|       72 | "Desktop"   |</span>
   <span class="org-table">| 12156104 | "Documents" |</span>
   <span class="org-table">|  3482440 | "Downloads" |</span>
   <span class="org-table">|  2901720 | "Library"   |</span>
   <span class="org-table">|    57344 | "Movies"    |</span>
   <span class="org-table">| 16548024 | "Music"     |</span>
   <span class="org-table">|      120 | "News"      |</span>
   <span class="org-table">|  7649472 | "Pictures"  |</span>
   <span class="org-table">|        0 | "Public"    |</span>
   <span class="org-table">|   152224 | "Sites"     |</span>
   <span class="org-table">|        8 | "System"    |</span>
   <span class="org-table">|       56 | "bin"       |</span>
   <span class="org-table">|  3821872 | "mail"      |</span>
   <span class="org-table">| 10605392 | "src"       |</span>
   <span class="org-table">|     1264 | "tools"     |</span>

   <span class="org-list-dt">2.</span> A function, written with a single line of R code, plots the data
      in the Org-mode table as a
      pie-chart. Note how this code block uses the <span class="org-verbatim">srcname</span>
      of the previous code block to obtain the data.

   In the Org-mode file:
   <span class="org-code">: #+name: directory-pie-chart(dirs = directories)
</span>   <span class="org-code">: #+begin_src R :session R-pie-example :file ../../images/babel/dirs.png
</span>   <span class="org-code">:   pie(dirs[,1], labels = dirs[,2])
</span>   <span class="org-code">: #+end_src
</span>
   HTML export of code:
<span class="org-meta-line">   #+name: directory-pie-chart(dirs=directories)</span>
<span class="org-block-begin-line">   #+begin_src R :session R-pie-example :file ../../images/babel/dirs.png
</span>  pie(dirs[,1], labels = dirs[,2])
<span class="org-block-end-line">   #+end_src
</span>   <span class="org-link"><a href="file:../../images/babel/dirs.png">file:../../images/babel/dirs.png</a></span>

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Using Code Blocks in Org Tables
</span>  <span class="org-drawer">:PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">spreadsheet</span>
  <span class="org-drawer">:END:</span>

  In addition to passing data from tables as <span class="org-link"><a href="#arguments-to-source-code-blocks">arguments</a></span> to code
  blocks, and <span class="org-link"><a href="#results-value">storing</a></span> results as tables, Babel can be used in a
  third way with Org-mode tables. First note that Org-mode's <span class="kc-org-link-url"><a href="https://orgmode.org/manual/The-spreadsheet.html#The-spreadsheet">existing
  spreadsheet functionality</a></span> allows values in cells to be computed
  automatically from the values of other cells, using a <span class="org-verbatim">#+TBLFM</span>
  formula line. In this way, table computations can be carried out using
  <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Formula-syntax-for-Calc.html#Formula-syntax-for-Calc">calc</a></span> and <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Formula-syntax-for-Lisp.html#Formula-syntax-for-Lisp">emacs lisp</a></span>.

  What Babel adds is the ability to use code blocks (in whatever
  language) in the <span class="org-verbatim">#+TBLFM</span> line to perform the necessary computation.

<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> Example 1: Data Summaries Using R
</span>    As a simple example, we'll fill in a cell in an Org-mode table with the
    average value of a few numbers. First, let's make some data. The
    following source block creates an Org-mode table filled with five random
    numbers between 0 and 1.

    <span class="org-code">: #+name: tbl-example-data
</span>    <span class="org-code">: #+begin_src R
</span>    <span class="org-code">: runif(n=5, min=0, max=1)
</span>    <span class="org-code">: #+end_src
</span>
<span class="org-meta-line">    #+name: tbl-example-data</span>
    <span class="org-table">| 0.836685163900256 |</span>
    <span class="org-table">| 0.696652316721156 |</span>
    <span class="org-table">| 0.382423302158713 |</span>
    <span class="org-table">| 0.987541858805344 |</span>
    <span class="org-table">| 0.994794291909784 |</span>

    Now we define a source block to calculate the mean of a table column.

    In the Org-mode file:
    <span class="org-code">: #+name: R-mean
</span>    <span class="org-code">: #+begin_src R :var x=""
</span>    <span class="org-code">: colMeans(x)
</span>    <span class="org-code">: #+end_src
</span>
    HTML export of code:
<span class="org-meta-line">    #+name: R-mean</span>
<span class="org-block-begin-line">    #+begin_src R :var x=""
</span>colMeans(x)
<span class="org-block-end-line">    #+end_src
</span>
    Finally, we create the table which is going to make use of the R
    code. This is done using the <span class="org-verbatim">org-sbe</span> ('source block evaluate') macro in
    the table formula line.

    In the Org-mode file:
    <span class="org-code">: #+tblname: summaries
</span>    <span class="org-code">: |              mean |
</span>    <span class="org-code">: |-------------------|
</span>    <span class="org-code">: | 0.779619386699051 |
</span>    <span class="org-code">: #+TBLFM: </span><span class="org-code"><span class="org-formula">@2$1='(org-sbe</span></span><span class="org-code"> "R-mean" (x "tbl-example-data()"))
</span>
    HTML export of code:
<span class="org-meta-line">    #+tblname: summaries</span>
    <span class="org-table">| mean |</span>
    <span class="org-table">|------|</span>
    <span class="org-table">| 0.00 |</span>
<span class="org-meta-line">    #+TBLFM: </span><span class="org-meta-line"><span class="org-formula">@2$1='(org-sbe</span></span><span class="org-meta-line"> "R-mean" (x "tbl-example-data()"));%.2f</span>

    To recalculate the table formula, use C-u C-c C-c in the
    table. Notice that as things stand the calculated value doesn't
    change, because the data (held in the table above named
    <span class="org-verbatim">tbl-example-data</span>) are static. However, if you delete that data table,
    then the reference will be interpreted as a reference to the source
    block responsible for generating the data; each time the table formula
    is recalculated the source block will be evaluated again, and
    therefore the calculated average value will change.

<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> Example 2: Babel Test Suite
</span>    While developing Babel, we used a suite of tests implemented
    as a large Org-mode table.  To run the entire test suite we simply
    evaluate the table with C-u C-c C-c: all of the tests are run,
    the results are compared with expectations, and the table is updated
    with results and pass/fail statistics.

    Here's a sample of our test suite.

    In the Org-mode file:

    <span class="org-code">: #+TBLNAME: org-babel-tests
</span>    <span class="org-code">: | functionality    | block        | arg |    expected |     results | pass |
</span>    <span class="org-code">: |------------------+--------------+-----+-------------+-------------+------|
</span>    <span class="org-code">: | basic evaluation |              |     |             |             | pass |
</span>    <span class="org-code">: |------------------+--------------+-----+-------------+-------------+------|
</span>    <span class="org-code">: | emacs lisp       | basic-elisp  |   2 |           4 |           4 | pass |
</span>    <span class="org-code">: | shell            | basic-shell  |     |           6 |           6 | pass |
</span>    <span class="org-code">: | ruby             | basic-ruby   |     |   org-babel |   org-babel | pass |
</span>    <span class="org-code">: | python           | basic-python |     | hello world | hello world | pass |
</span>    <span class="org-code">: | R                | basic-R      |     |          13 |          13 | pass |
</span>    <span class="org-code">: #+TBLFM: $5='(if (= (length $3) 1) (sbe $2 (n $3)) (sbe $2)) :: $6='(if (string= $4 $5) "pass" (format "expected %S but was %S" $4 $5))
</span>
    HTML export of code:

<span class="org-meta-line">    #+TBLNAME: org-babel-tests</span>
    <span class="org-table">| functionality    | block        | arg |    expected |     results | pass |</span>
    <span class="org-table">|------------------+--------------+-----+-------------+-------------+------|</span>
    <span class="org-table">| basic evaluation |              |     |             |             | pass |</span>
    <span class="org-table">|------------------+--------------+-----+-------------+-------------+------|</span>
    <span class="org-table">| emacs lisp       | basic-elisp  |   2 |           4 |           4 | pass |</span>
    <span class="org-table">| shell            | basic-shell  |     |           6 |           6 | pass |</span>
    <span class="org-table">| ruby             | basic-ruby   |     |   org-babel |   org-babel | pass |</span>
    <span class="org-table">| python           | basic-python |     | hello world | hello world | pass |</span>
    <span class="org-table">| R                | basic-R      |     |          13 |          13 | pass |</span>
<span class="org-meta-line">    #+TBLFM: $5='(if (= (length $3) 1) (sbe $2 (n $3)) (sbe $2)) :: $6='(if (string= $4 $5) "pass" (format "expected %S but was %S" $4 $5))</span>

<span class="org-hide">***</span><span class="org-level-4"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-4"> code blocks for tests
</span>
     In the Org-mode file:

     <span class="org-code">: #+name: basic-elisp(n)
</span>     <span class="org-code">: #+begin_src emacs-lisp
</span>     <span class="org-code">: (* 2 n)
</span>     <span class="org-code">: #+end_src
</span>
     HTML export of code:

<span class="org-meta-line">     #+name: basic-elisp(n=0)</span>
<span class="org-block-begin-line">     #+begin_src emacs-lisp
</span><span class="org-block">  </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">*</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-numbers-number">2</span></span><span class="org-block"> n</span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">
</span><span class="org-block-end-line">     #+end_src
</span>
     In the Org-mode file:
     <span class="org-code">: #+name: basic-shell
</span>     <span class="org-code">: #+begin_src sh :results silent
</span>     <span class="org-code">: expr 1 + 5
</span>     <span class="org-code">: #+end_src
</span>
     HTML export of code:
<span class="org-meta-line">     #+name: basic-shell</span>
<span class="org-block-begin-line">     #+begin_src sh :results silent
</span><span class="org-block">  expr </span><span class="org-block"><span class="highlight-numbers-number">1</span></span><span class="org-block"> + </span><span class="org-block"><span class="highlight-numbers-number">5</span></span><span class="org-block">
</span><span class="org-block-end-line">     #+end_src
</span>
     In the Org-mode file:
     <span class="org-code">: #+name: date-simple
</span>     <span class="org-code">: #+begin_src sh :results silent
</span>     <span class="org-code">: date
</span>     <span class="org-code">: #+end_src
</span>
     HTML export of code:
<span class="org-meta-line">     #+name: date-simple</span>
<span class="org-block-begin-line">     #+begin_src sh :results silent
</span><span class="org-block">  </span><span class="org-block"><span class="type">date</span></span><span class="org-block">
</span><span class="org-block-end-line">     #+end_src
</span>
     In the Org-mode file:
     <span class="org-code">: #+name: basic-ruby
</span>     <span class="org-code">: #+begin_src ruby :results silent
</span>     <span class="org-code">: "org-babel"
</span>     <span class="org-code">: #+end_src
</span>
     HTML export of code:
<span class="org-meta-line">     #+name: basic-ruby</span>
<span class="org-block-begin-line">     #+begin_src ruby :results silent
</span><span class="org-block">  </span><span class="org-block"><span class="string">"org-babel"</span></span><span class="org-block">
</span><span class="org-block-end-line">     #+end_src
</span>
     In the Org-mode file
     <span class="org-code">: #+name: basic-python
</span>     <span class="org-code">: #+begin_src python :results silent
</span>     <span class="org-code">: 'hello world'
</span>     <span class="org-code">: #+end_src
</span>
     HTML export of code:
<span class="org-meta-line">     #+name: basic-python</span>
<span class="org-block-begin-line">     #+begin_src python :results silent
</span><span class="org-block">  </span><span class="org-block"><span class="doc">'hello world'</span></span><span class="org-block">
</span><span class="org-block-end-line">     #+end_src
</span>
     In the Org-mode file:
     <span class="org-code">: #+name: basic-R
</span>     <span class="org-code">: #+begin_src R :results silent
</span>     <span class="org-code">: b &lt;- 9
</span>     <span class="org-code">: b + 4
</span>     <span class="org-code">: #+end_src
</span>
     HTML export of code:
<span class="org-meta-line">     #+name: basic-R</span>
<span class="org-block-begin-line">     #+begin_src R :results silent
</span>  b &lt;- 9
  b + 4
<span class="org-block-end-line">     #+end_src
</span>
<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> The Library of Babel
</span>  <span class="org-drawer">:PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">library-of-babel</span>
  <span class="org-drawer">:END:</span>

  (see also <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Library-of-Babel.html#Library-of-Babel">Org manual:Library-of-Babel</a></span>)

  As we saw above with the <span class="org-link"><a href="*Simple example of using a code block as a function">square</a></span> example, once a source block
  function has been defined it can be called using the <span class="org-verbatim">lob</span> notation:

  <span class="org-code">: #+lob: square(x=6)
</span>
  But what about code blocks that you want to make available to
  every Org-mode buffer?

  In addition to the current buffer, Babel searches for
  pre-defined code block functions in the Library of
  Babel. This is a user-extensible collection of ready-made source
  code blocks for handling common tasks.  One use for the Library of
  Babel (not yet done!) will be to provide a choice of data graphing
  procedures for data held in Org-mode tables, using languages such as
  R, gnuplot, asymptote, etc. If you implement something that might be
  of use to other Org-mode users, please consider adding it to the
  Library of Babel; similarly, feel free to request help solving a
  problem using external code via Babel -- there's always a chance
  that other Babel users will be able to contribute some helpful
  code.

  Babel comes pre-populated with the code blocks located in
  the <span class="org-link"><a href="file:library-of-babel.org">Library of Babel</a></span> file -- raw file at
  <span class="org-formula">@@html:</span> &lt;a href="<span class="kc-org-link-url"><a href="https://code.orgmode.org/bzg/worg/raw/master/library-of-babel.org">https://code.orgmode.org/bzg/worg/raw/master/library-of-babel.org</a></span>"&gt;library-of-babel.org&lt;/a&gt;@@
  --. It is possible to add code blocks to the library from any
  Org-mode file using the <span class="org-verbatim">org-babel-lob-ingest</span> (bound to <span class="org-verbatim">C-c C-v
  l</span>).

<span class="org-meta-line">  #+name: add-file-to-lob</span>
<span class="org-block-begin-line">  #+begin_src emacs-lisp
</span><span class="org-block">  </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="function-name">org-babel-lob-ingest</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"path/to/file.org"</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">
</span><span class="org-block-end-line">  #+end_src
</span>
  Note that it is possible to pass table values or the output of a
  source-code block to Library of Babel functions. It is also possible
  to reference Library of Babel functions in arguments to code blocks.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Literate Programming
</span>  <span class="org-drawer">:PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">literate-programming</span>
  <span class="org-drawer">:END:</span>

<span class="org-block-begin-line">  #+begin_quote
</span><span class="org-quote">  Let us change our traditional attitude to the construction of
  programs: Instead of imagining that our main task is to instruct a
  </span><span class="org-quote"><span class="italic">computer</span></span><span class="org-quote"> what to do, let us concentrate rather on explaining to
  </span><span class="org-quote"><span class="italic">human beings</span></span><span class="org-quote"> what we want a computer to do.

  The practitioner of literate programming can be regarded as an
  essayist, whose main concern is with exposition and excellence of
  style. Such an author, with thesaurus in hand, chooses the names of
  variables carefully and explains what each variable means. He or she
  strives for a program that is comprehensible because its concepts have
  been introduced in an order that is best for human understanding,
  using a mixture of formal and informal methods that reinforce each
  other.

  -- Donald Knuth
</span><span class="org-block-end-line">  #+end_quote
</span>
  Babel supports <span class="kc-org-link-url"><a href="https://en.wikipedia.org/wiki/Literate_programming">Literate Programming</a></span> (LP) by allowing the act of
  programming to take place inside of Org-mode documents.  The Org-mode
  file can then be exported (<span class="bold">woven</span> in LP speak) to HTML or LaTeX for
  consumption by a human, and the embedded source code can be extracted
  (<span class="bold">tangled</span> in LP speak) into structured source code files for
  consumption by a computer.

  To support these operations Babel relies on Org-mode's <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Exporting.html#Exporting">existing
  exporting functionality</a></span> for <span class="bold">weaving</span> of documentation, and on the
  <span class="org-verbatim">org-babel-tangle</span> function which makes use of <span class="kc-org-link-url"><a href="http://www.cs.tufts.edu/~nr/noweb/">Noweb</a></span> <span class="org-link"><a href="#literate-programming-example">reference syntax</a></span>
  for <span class="bold">tangling</span> of code files.

  The <span class="org-link"><a href="#literate-programming-example">following example</a></span> demonstrates the process of <span class="bold">tangling</span> in
  Babel.

<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> Simple Literate Programming Example (Noweb syntax)
</span>    <span class="org-drawer">:PROPERTIES:</span>
    <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">literate-programming-example</span>
    <span class="org-drawer">:END:</span>

    Tangling functionality is controlled by the <span class="org-verbatim">tangle</span> family of tangle
    header arguments.  These arguments can be used to turn tangling on or
    off (the default), either for the code block or the Org-mode
    heading level.

    The following code blocks demonstrate how to tangle them into a
    single source code file using <span class="org-verbatim">org-babel-tangle</span>.

    The following two code blocks have no <span class="org-verbatim">tangle</span> header arguments
    and so will not, by themselves, create source code files.  They are
    included in the source code file by the third code block, which
    does have a <span class="org-verbatim">tangle</span> header argument.

    In the Org-mode file:
    <span class="org-code">: #+name: hello-world-prefix
</span>    <span class="org-code">: #+begin_src sh :exports none
</span>    <span class="org-code">:   echo "/-----------------------------------------------------------\\"
</span>    <span class="org-code">: #+end_src
</span>
    HTML export of code:
<span class="org-meta-line">    #+name: hello-world-prefix</span>
<span class="org-block-begin-line">    #+begin_src sh :exports none
</span><span class="org-block">  </span><span class="org-block"><span class="type">echo</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"/-----------------------------------------------------------\\"</span></span><span class="org-block">
</span><span class="org-block-end-line">    #+end_src
</span>
    In the Org-mode file
    <span class="org-code">: #+name: hello-world-postfix
</span>    <span class="org-code">: #+begin_src sh :exports none
</span>    <span class="org-code">:   echo "\-----------------------------------------------------------/"
</span>    <span class="org-code">: #+end_src
</span>
    HTML export of code:
<span class="org-meta-line">    #+name: hello-world-postfix</span>
<span class="org-block-begin-line">    #+begin_src sh :exports none
</span><span class="org-block">  </span><span class="org-block"><span class="type">echo</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"\-----------------------------------------------------------/"</span></span><span class="org-block">
</span><span class="org-block-end-line">    #+end_src
</span>

    The third code block does have a <span class="org-verbatim">tangle</span> header argument
    indicating the name of the file to which the tangled source code will
    be written.  It also has <span class="kc-org-link-url"><a href="http://www.cs.tufts.edu/~nr/noweb/">Noweb</a></span> style references to the two previous
    code blocks.  These references will be expanded during tangling
    to include them in the output file as well.

    In the Org-mode file:
    <span class="org-code">: #+name: hello-world
</span>    <span class="org-code">: #+begin_src sh :tangle hello :exports none :noweb yes
</span>    <span class="org-code">:   &lt;&lt;hello-world-prefix&gt;&gt;
</span>    <span class="org-code">:   echo "|                       hello world                         |"
</span>    <span class="org-code">:   &lt;&lt;hello-world-postfix&gt;&gt;
</span>    <span class="org-code">: #+end_src
</span>
    HTML export of code:
<span class="org-meta-line">    #+name: hello-world</span>
<span class="org-block-begin-line">    #+begin_src sh :tangle hello.sh :exports none :noweb yes
</span><span class="org-block">  &lt;&lt;hello-world-prefix&gt;&gt;</span><span class="org-block"><span class="sh-heredoc">
  </span></span><span class="org-block"><span class="type"><span class="sh-heredoc">echo</span></span></span><span class="org-block"> "|                       hello world                         |"
  &lt;&lt;hello-world-postfix&gt;&gt;
</span><span class="org-block-end-line">    #+end_src
</span>

    Calling <span class="org-verbatim">org-babel-tangle</span> will result in the following shell source
    code being written to the <span class="org-verbatim">hello.sh</span> file:

<span class="org-meta-line">    #+name: hello-world-output</span>
<span class="org-block-begin-line">    #+begin_src sh
</span><span class="org-block"><span class="comment-delimiter"><span class="org-tag">#</span></span></span><span class="org-block"><span class="comment"><span class="org-tag">!/usr/bin/env</span></span></span><span class="org-block"><span class="comment"> sh
</span></span><span class="org-block">
</span><span class="org-block"><span class="comment-delimiter"># </span></span><span class="org-block"><span class="comment"><a href="file:~/org/temp/index.org::*Noweb%20test">[[file:~/org/temp/index.org::*Noweb%20test][hello-world]]</a>
</span></span><span class="org-block">
</span><span class="org-block"><span class="type">echo</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"/-----------------------------------------------------------\\"</span></span><span class="org-block">
</span><span class="org-block"><span class="type">echo</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"|                       hello world                         |"</span></span><span class="org-block">
</span><span class="org-block"><span class="type">echo</span></span><span class="org-block"> </span><span class="org-block"><span class="string">"\-----------------------------------------------------------/"</span></span><span class="org-block">
</span><span class="org-block"><span class="comment-delimiter"># </span></span><span class="org-block"><span class="comment">hello-world ends here
</span></span><span class="org-block-end-line">    #+end_src
</span>
    In addition, the following syntax can be used to insert the <span class="bold">results</span>
    of evaluating a code block, in this case one named <span class="org-verbatim">example-block</span>.

    <span class="org-code">: # &lt;&lt;example-block()&gt;&gt;
</span>
    Any optional arguments can be passed to <span class="org-verbatim">example-block()</span> by placing the
    arguments inside the parentheses following the convention defined when
    calling source block functions (see the <span class="org-link"><a href="#library-of-babel">Library of babel</a></span>). For example,

    <span class="org-code">: # &lt;&lt;example-block(a=9)&gt;&gt;
</span>
    sets the value of argument \"a\" equal to \"9\".  Note that
    these arguments are not evaluated in the current source-code
    block but are passed literally to <span class="org-verbatim">example-block()</span>.

<span class="org-hide">**</span><span class="org-level-3"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-3"> Emacs Initialization with Babel
</span>    <span class="org-drawer">:PROPERTIES:</span>
    <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">emacs-initialization</span>
    <span class="org-drawer">:END:</span>

<span class="org-meta-line">    #+attr_html: style="float:left;"</span>
    <span class="org-link"><a href="file:../../images/babel/dot-emacs.png">file:../../images/babel/dot-emacs.png</a></span>

    Babel has special support for embedding your Emacs initialization
    into Org-mode files.  The <span class="org-verbatim">org-babel-load-file</span> function can be used
    to load the Emacs Lisp code blocks embedded in a literate
    Org-mode file in the same way that you might load a regular Emacs Lisp
    file, such as .emacs.

    This allows you to make use of the nice features of Org-mode, such as folding, tags,
    notes, HTML export, etc., to organize and maintain your Emacs initialization.

    To try this out, either see the simple <span class="org-link"><a href="#literate-emacs-init">Literate Emacs Initialization</a></span>
    example, or check out the Babel Literate Programming version of
    Phil Hagelberg's excellent <span class="kc-org-link-url"><a href="http://github.com/technomancy/emacs-starter-kit/tree/master">emacs-starter-kit</a></span> available at
    <span class="kc-org-link-url"><a href="http://github.com/eschulte/emacs-starter-kit/tree/master">Org-babel-emacs-starter-kit</a></span>.

<span class="org-hide">****</span><span class="org-level-5"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-5"> Literate Emacs Initialization
</span>      <span class="org-drawer">:PROPERTIES:</span>
      <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">literate-emacs-init</span>
      <span class="org-drawer">:END:</span>

      For a simple example of usage, follow these 5 steps:

      <span class="org-list-dt">1)</span> create a directory named <span class="org-verbatim">.emacs.d</span> in the base of your home
<span class="whitespace-tab">        </span> directory;
<span class="whitespace-tab">        </span><span class="org-block-begin-line"> #+begin_src sh
</span><span class="whitespace-tab">        </span><span class="org-block"> </span><span class="org-block"><span class="type">mkdir</span></span><span class="org-block"> ~/.emacs.d
</span><span class="whitespace-tab">        </span><span class="org-block-end-line"> #+end_src
</span>      <span class="org-list-dt">2)</span> checkout the latest version of Org-mode into the src subdirectory
<span class="whitespace-tab">        </span> of this new directory;
<span class="whitespace-tab">        </span><span class="org-block-begin-line"> #+begin_src sh
</span><span class="whitespace-tab">        </span><span class="org-block"> </span><span class="org-block"><span class="type">cd</span></span><span class="org-block"> ~/.emacs.d
</span><span class="whitespace-tab">        </span><span class="org-block"> </span><span class="org-block"><span class="type">mkdir</span></span><span class="org-block"> src
</span><span class="whitespace-tab">        </span><span class="org-block"> </span><span class="org-block"><span class="type">cd</span></span><span class="org-block"> src
</span><span class="whitespace-tab">        </span><span class="org-block"> </span><span class="org-block"><span class="type">git</span></span><span class="org-block"> clone <a href="https://code.orgmode.org/bzg/org-mode.git">https://code.orgmode.org/bzg/org-mode.git</a>
</span><span class="whitespace-tab">        </span><span class="org-block-end-line"> #+end_src
</span>      <span class="org-list-dt">3)</span> place the following code block in a file called <span class="org-verbatim">init.el</span> in your Emacs
<span class="whitespace-tab">        </span> initialization directory (<span class="org-verbatim">~/.emacs.d</span>).
<span class="whitespace-tab">        </span><span class="org-meta-line"> #+name: emacs-init</span>
<span class="whitespace-tab">        </span><span class="org-block-begin-line"> #+begin_src emacs-lisp
</span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;;; </span></span><span class="org-block"><span class="comment">init.el --- Where all the magic begins
</span></span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;;</span></span><span class="org-block"><span class="comment">
</span></span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">This file loads Org-mode and then loads the rest of our Emacs initialization from Emacs lisp
</span></span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">embedded in literate Org-mode files.
</span></span><span class="org-block">
</span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">Load up Org Mode and (now included) Org Babel for elisp embedded in Org Mode files
</span></span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="keyword">setq</span></span><span class="org-block"> dotfiles-dir </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">file-name-directory</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="keyword">or</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="variable-name">buffer-file-name</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">load-file-name</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">

</span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="keyword">let*</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block">org-dir </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">expand-file-name</span></span><span class="org-block">
</span><span class="whitespace-tab">                        </span><span class="org-block">    </span><span class="org-block"><span class="string">"lisp"</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">expand-file-name</span></span><span class="org-block">
</span><span class="whitespace-tab">                                </span><span class="org-block">    </span><span class="org-block"><span class="string">"org"</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="constant">expand-file-name</span></span><span class="org-block">
</span><span class="whitespace-tab">                                        </span><span class="org-block">   </span><span class="org-block"><span class="string">"src"</span></span><span class="org-block"> dotfiles-dir</span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block">
</span><span class="whitespace-tab">                </span><span class="org-block">  </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block">org-contrib-dir </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">expand-file-name</span></span><span class="org-block">
</span><span class="whitespace-tab">                                </span><span class="org-block">    </span><span class="org-block"><span class="string">"lisp"</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">expand-file-name</span></span><span class="org-block">
</span><span class="whitespace-tab">                                        </span><span class="org-block">    </span><span class="org-block"><span class="string">"contrib"</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="constant">expand-file-name</span></span><span class="org-block">
</span><span class="whitespace-tab">                                                </span><span class="org-block">       </span><span class="org-block"><span class="string">".."</span></span><span class="org-block"> org-dir</span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block">
</span><span class="whitespace-tab">                </span><span class="org-block">  </span><span class="org-block"><span class="rainbow-delimiters-depth-3">(</span></span><span class="org-block"><span class="variable-name">load-path</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">append</span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">list</span></span><span class="org-block"> org-dir org-contrib-dir</span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block">
</span><span class="whitespace-tab">                                </span><span class="org-block">     </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="keyword">or</span></span><span class="org-block"> </span><span class="org-block"><span class="variable-name">load-path</span></span><span class="org-block"> nil</span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-3">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block">
</span><span class="whitespace-tab">        </span><span class="org-block">     </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">load up Org-mode and Org-babel
</span></span><span class="whitespace-tab">        </span><span class="org-block">     </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">require</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-quoted-quote">'</span></span><span class="org-block"><span class="constant">org</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block">
</span><span class="whitespace-tab">        </span><span class="org-block">     </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">require</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-quoted-quote">'</span></span><span class="org-block"><span class="constant">ob-tangle</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">

</span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;; </span></span><span class="org-block"><span class="comment">load up all literate org-mode files in this directory
</span></span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="rainbow-delimiters-depth-1">(</span></span><span class="org-block"><span class="constant">mapc</span></span><span class="org-block"> </span><span class="org-block"><span class="highlight-quoted-quote"><span class="org-tag">#'</span></span></span><span class="org-block"><span class="highlight-quoted-symbol"><span class="org-tag">org-babel-load-file</span></span></span><span class="org-block"> </span><span class="org-block"><span class="rainbow-delimiters-depth-2">(</span></span><span class="org-block"><span class="constant">directory-files</span></span><span class="org-block"> dotfiles-dir t </span><span class="org-block"><span class="string">"\\.org$"</span></span><span class="org-block"><span class="rainbow-delimiters-depth-2">)</span></span><span class="org-block"><span class="rainbow-delimiters-depth-1">)</span></span><span class="org-block">

</span><span class="whitespace-tab">        </span><span class="org-block">   </span><span class="org-block"><span class="comment-delimiter">;;; </span></span><span class="org-block"><span class="comment">init.el ends here
</span></span><span class="whitespace-tab">        </span><span class="org-block-end-line"> #+end_src
</span>      <span class="org-list-dt">4)</span> implement all of your Emacs customizations inside of Emacs Lisp
<span class="whitespace-tab">        </span> code blocks embedded in Org-mode files in this directory;
<span class="whitespace-tab">        </span> and
      <span class="org-list-dt">5)</span>  re-start Emacs to load the customizations.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Reproducible Research
</span>  <span class="org-drawer">:PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">reproducible-research</span>
  <span class="org-drawer">:END:</span>
<span class="org-block-begin-line">  #+begin_quote
</span><span class="org-quote">  An article about computational science in a scientific publication is
  not the scholarship itself, it is merely advertising of the
  scholarship. The actual scholarship is the complete software
  development environment and the complete set of instructions which
  generated the figures.

  -- D. Donoho
</span><span class="org-block-end-line">  #+end_quote
</span>
  <span class="kc-org-link-url"><a href="http://reproducibleresearch.net/index.php/Main_Page">Reproducible Research</a></span> (RR) is the practice of distributing, along with
  a research publication, all data, software source code, and tools
  required to reproduce the results discussed in the publication.  As
  such the RR package not only describes the research and its results,
  but becomes a complete laboratory in which the research can be
  reproduced and extended.

  Org-mode already has exceptional support for <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Exporting.html#Exporting">exporting to HTML and
  LaTeX</a></span>.  Babel makes Org-mode a tool for RR by <span class="bold">activating</span> the
  data and code blocks embedded in Org-mode documents; the
  entire document becomes executable.  This makes it possible, and natural, to
  distribute research in a format that encourages readers to recreate
  results and perform their own analyses.

  One notable existing RR tool is <span class="kc-org-link-url"><a href="https://en.wikipedia.org/wiki/Sweave">Sweave</a></span>, which provides a mechanism for
  embedding <span class="kc-org-link-url"><a href="http://www.r-project.org/">R</a></span> code into LaTeX documents.  Sweave is a mature
  and very useful tool, but we believe that Babel has several
  advantages:
  <span class="org-list-dt">-</span> it supports multiple languages (we're not aware of other RR tools that do this);
  <span class="org-list-dt">-</span> the <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Exporting.html#Exporting">export process</a></span> is flexible and powerful, including HTML as a
    target in addition to LaTeX; and
  <span class="org-list-dt">-</span> the document can make use of Org-mode features that support <span class="kc-org-link-url"><a href="https://orgmode.org/manual/Agenda-views.html#Agenda-views">project
    planning</a></span> and <span class="kc-org-link-url"><a href="https://orgmode.org/manual/TODO-items.html#TODO-items">task management</a></span>.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Footnotes
</span><span class="org-footnote">[fn:1]</span> Calling <span class="org-verbatim">C-c C-o</span> on a code block will open the
block's results in a separate buffer.

<span class="org-footnote">[fn:2]</span>  This mode will be familiar to Sweave users.
</pre>
  </body>
</html>
