<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.56 in css mode. -->
<html>
  <head>
    <title>org-jsmath.org</title>
    <style type="text/css">
    <!--
      body {
        color: #d6d6d4;
        background-color: #161719;
      }
      .comment {
        /* font-lock-comment-face */
        color: #696969;
      }
      .italic {
        /* italic */
        font-style: italic;
      }
      .kc-org-link-url {
        /* kc-org-link-url */
        color: #d02090;
        text-decoration: underline;
      }
      .org-code {
        /* org-code */
        color: #dfd05e;
      }
      .org-document-info {
        /* org-document-info */
        color: #fd971f;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #555556;
      }
      .org-document-title {
        /* org-document-title */
        color: #fd971f;
        font-weight: bold;
      }
      .org-footnote {
        /* org-footnote */
        color: #fd971f;
      }
      .org-formula {
        /* org-formula */
        color: #66d9ef;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #eb4509;
        font-weight: bold;
      }
      .org-link {
        /* org-link */
        color: #fd971f;
        font-weight: bold;
        text-decoration: underline;
      }
      .org-list-dt {
        /* org-list-dt */
        color: #e2c770;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #7f7f80;
      }
      .org-superstar-header-bullet {
      }
      .org-verbatim {
        /* org-verbatim */
        color: #b6e63e;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="org-document-info-keyword">#+TITLE:</span>      <span class="org-document-title">How to use jsMath with org-mode
</span><span class="org-document-info-keyword">#+AUTHOR:</span>     <span class="org-document-info">Darlan Cavalcante Moreira
</span><span class="org-document-info-keyword">#+EMAIL:</span>      <span class="org-document-info">darcamo at </span><span class="org-document-info"><span class="org-formula">@gmail</span></span><span class="org-document-info"> dot com
</span><span class="org-meta-line">#+OPTIONS:    H:3 num:nil toc:t \n:nil ::t |:t ^:t -:t f:t *:t tex:t d:(HIDE) tags:not-in-toc</span>
<span class="org-meta-line">#+STARTUP:    align fold nodlcheck hidestars oddeven lognotestate odd</span>
<span class="org-meta-line">#+SEQ_TODO:   TODO(t) INPROGRESS(i) WAITING(w@) | DONE(d) CANCELED(c@)</span>
<span class="org-meta-line">#+TAGS:       Write(w) Update(u) Fix(f) Check(c)</span>
<span class="org-meta-line">#+LANGUAGE:   en</span>
<span class="org-meta-line">#+PRIORITIES: A C B</span>
<span class="org-meta-line">#+CATEGORY:   worg</span>

<span class="comment"># This file is released by its authors and contributors under the GNU</span>
<span class="comment"># Free Documentation license v1.3 or later, code examples are released</span>
<span class="comment"># under the GNU General Public License v3 or later.</span>

<span class="org-link"><a href="file:index.org">{Back to Worg's index}</a></span>

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Why bother
</span>  Here are some advantages and disadvantages about using jsMath instead of images.
<span class="org-list-dt">-</span> <span class="org-list-dt">Advantages ::</span>
  <span class="org-list-dt">-</span> It's really pretty when you have all the fonts installed and you can zoom in
    without any loss of quality.
  <span class="org-list-dt">-</span> No need to generate images when exporting
    <span class="org-list-dt">+</span> When you see the generated HTML page the jsMath script is run and replaces
      the latex code appropriately. Because the efficiency of the java-script
      engine in modern browsers are increasing more and more these replacements
      are usually fast even if there are a lot of equations in the generated
      page.
    <span class="org-list-dt">+</span> On the other hand, creating images when exporting can take considerable
      time when there are many equations.

<span class="org-list-dt">-</span> <span class="org-list-dt">Disadvantages ::</span>
  <span class="org-list-dt">-</span> It is more difficult to setup
    <span class="org-list-dt">+</span> you have to install jsMath for authors, since you are creating pages with it.
    <span class="org-list-dt">+</span> you have to install jsMath for users, that is, install the fonts that will
      be used. If this is not done, jsMath will use images for the
      equations. You won't need to generate the images when exporting, since
      jsMath already has all images (it just put the pieces together)
  <span class="org-list-dt">-</span> It is more inconvenient to send the generated HTML page to a friend, since
    your friend will need to install the fonts used by jsMath.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Download jsMath
</span>  First we need to download jsMath for authors as explained in
  <span class="kc-org-link-url"><a href="http://www.math.union.edu/~dpvc/jsMath/download/jsMath.html">http://www.math.union.edu/~dpvc/jsMath/download/jsMath.html</a></span>. The necessary
  files are <span class="kc-org-link-url"><a href="http://sourceforge.net/project/showfiles.php?group_id=172663">here</a></span>. Download the latest version of jsMath and also the "jsMath
  Image Fonts"<span class="org-footnote">[fn:1]</span> file. Don't bother with the sprite fonts.
  
<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Installation and configuration of jsMath
</span>  Unpack the jsMath and jsMath-image-fonts archives, and place the fonts
  folder from the second archive into the jsMath folder from the first
  archive. That is, the fonts folder should be in the same folder as the
  jsMath.js file.
  
  The main configuration file for jsMath is the easy/load.js script. We need
  to tell org-mode to include this script in each generated HTML
  file. Assuming that the jsMath folder is in the same parent folder as the
  folder containing the .org files, we can just add
  <span class="org-code">: #+STYLE: &lt;SCRIPT SRC="../jsMath/easy/load.js"&gt;&lt;/SCRIPT&gt;
</span>  to the beginning of each org file. Alternatively, if org-publish is utilized
  we can put
  <span class="org-code">: :style "&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"../stylesheet.css\" /&gt;"
</span>  in the project definition.

  
  With that, when the HTML generated by org-mode is viewed in the browser jsMath
  will replace the equations inside the math delimiters appropriately<span class="org-footnote">[fn:2]</span>. By
  default, jsMath recognizes <span class="org-verbatim">\(</span> and <span class="org-verbatim">\)</span> as math delimiters for inline
  equations, and <span class="org-verbatim">\[</span> and <span class="org-verbatim">\]</span> (in addition to <span class="org-verbatim">$$</span>) as math delimiters for
  display equations.
  
  To recognize <span class="org-verbatim">$</span> as math delimiters for inline equations change
  "processSingleDollars:" to 1 in the easy/load.js file.

  You will probably want to load some additional plugins (for instance,
  AMSSymbols). In order to do that search for
    <span class="org-code">: loadFiles: [],
</span>  in the easy/load.js file and add each plugin name separated by comma. Here I
  use
    <span class="org-code">: loadFiles: ["extensions/AMSmath.js","extensions/AMSsymbols.js", "extensions/autobold.js", "extensions/eqn-number.js"],
</span>  The plugins AMSmath and AMSSymbols are self-explanatory and you will need them
  if you are using symbols or environments provided by AMS such as the symbol
  <span class="org-verbatim">\triangleq</span>.
  
  The plugin eqn-number is really nice. It will number equations that have a
  label and allow you to reference them later with the ref command. For instance
    <span class="org-code">: \[
</span>    <span class="org-code">: \label{a_label}
</span>    <span class="org-code">: x=2*y
</span>    <span class="org-code">: \]
</span>    <span class="org-code">: Bla bla bla from equation \(\ref{a_label}\)
</span>  will create a numbered equation that can be referred as showed in the
  example<span class="org-footnote">[fn:3]</span>. The reference is a link to the equation.

  The plugin autobold causes jsMath to use \boldsymbol{...} around
  mathematics that appears within &lt;B&gt;...&lt;/B&gt; tags or has font-weight:bold
  applied via CSS rule.

  Look in the extensions folder for other plugins (some of
  them are loaded automatically by jsMath and it is not necessary to include
  them in the loadFiles).

  As last, if the browser freezes when jsMath is being loaded, try disable the
  autoload feature in the easy/load.js file.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Org setup to keep LaTeX intact for jsMath
</span>  
  <span class="italic">(Updated 2010-01-07 by CM)</span>

  Because we are going to process the latex code with jsMath, we
  must ensure that Org-mode leaves the latex code intact. This can
  now be done by setting the variable
  org-export-with-LaTeX-fragments to <span class="org-verbatim">verbatim</span>, e.g. by including
  this line at the beginning of the Org file:
  <span class="org-code">: #+OPTIONS: LaTeX:verbatim
</span>  (Previously, the same effect was achieved with the lines
  <span class="org-code">: #+OPTIONS: ^:nil
</span>  <span class="org-code">: #+OPTIONS: LaTeX:nil
</span>  but this had the side effect of turning off sub- and superscripts
  in all non-latex text. The new <span class="org-verbatim">verbatim</span> option can be used with
  <span class="org-verbatim">^:t</span>.)

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> As pretty as it can get
</span>  jsMath should be working with org-mode by now, but it is using the image fonts
  and warns the user with a red frame at the top of the page. That means that
  the "installation for authors" part is done and now we only need to install
  some .ttf fonts available at the jsMath website. Download the file
  <span class="kc-org-link-url"><a href="http://www.math.union.edu/~dpvc/jsMath/download/TeX-fonts-linux.tgz">TeX-fonts-linux.tgz</a></span> in the website. and extract the files to ~/.fonts.

  The package TeX-fonts-linux has the most common ones, but it is also good to
  install the extra fonts (to see, for instance, the "mathcal" symbols).

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Extra fonts
</span>  Some additional fonts available in the <span class="kc-org-link-url"><a href="http://www.math.union.edu/~dpvc/jsMath/download/extra-fonts/welcome.html">extra fonts</a></span> page are useful.  Download
  the zip file for authors (for instance bbold10.zip) and extract it to the
  jsMath/fonts folder. Then download the corresponding .ttf file to the ~/.fonts
  (I prefer the light version because the dark version may be confused with
  bold). You don't need to install all of the extra fonts. The ones I found
  useful are bbold10, cmbsy10, cmmib10, msam10 and msbm10<span class="org-footnote">[fn:4]</span>.

<span class="org-level-1"><span class="org-superstar-header-bullet">*</span></span><span class="org-level-1"> Footnotes
</span>
<span class="org-footnote">[fn:1]</span> The Image Fonts are the images of each symbol that jsMath uses as a
fallback when the user does not have the ttf fonts installed. We will install
these fonts later and it would be possible to avoid installing the image fonts,
but it requires an additional configuration step.

<span class="org-footnote">[fn:2]</span> A button "jsMath" should appear at the bottom east of the page.

<span class="org-footnote">[fn:3]</span> The Math delimiters are necessary to tell jsMath to process the \ref
command.

<span class="org-footnote">[fn:4]</span> Without the extra fonts some symbols won't be showed even if the plugin
is loaded, such as the \triangleq symbol.
</pre>
  </body>
</html>
